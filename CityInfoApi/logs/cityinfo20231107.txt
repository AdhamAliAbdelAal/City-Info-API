2023-11-07 00:00:33.780 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 00:00:33.860 +02:00 [DBG] Hosting starting
2023-11-07 00:00:33.920 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 00:00:33.958 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 00:00:33.960 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 00:00:33.962 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 00:00:33.964 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 00:00:33.965 +02:00 [INF] Hosting environment: Development
2023-11-07 00:00:33.966 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 00:00:33.967 +02:00 [DBG] Hosting started
2023-11-07 00:00:39.851 +02:00 [DBG] Connection id "0HMUV2F8810AN" received FIN.
2023-11-07 00:00:39.864 +02:00 [DBG] Connection id "0HMUV2F8810AN" accepted.
2023-11-07 00:00:39.871 +02:00 [DBG] Connection id "0HMUV2F8810AO" accepted.
2023-11-07 00:00:39.872 +02:00 [DBG] Connection id "0HMUV2F8810AN" started.
2023-11-07 00:00:39.878 +02:00 [DBG] Connection id "0HMUV2F8810AO" started.
2023-11-07 00:00:39.909 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 00:00:39.953 +02:00 [DBG] Connection id "0HMUV2F8810AN" stopped.
2023-11-07 00:00:39.959 +02:00 [DBG] Connection id "0HMUV2F8810AN" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 00:00:39.982 +02:00 [DBG] Connection 0HMUV2F8810AO established using the following protocol: "Tls12"
2023-11-07 00:00:40.060 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities - -
2023-11-07 00:00:40.062 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 00:00:40.152 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 00:00:40.214 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-11-07 00:00:40.231 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)' with route pattern 'api/Cities' is valid for the request path '/api/cities'
2023-11-07 00:00:40.234 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 00:00:40.240 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 00:00:40.281 +02:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.CityDto]]] GetCities() on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 00:00:40.298 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 00:00:40.302 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 00:00:40.307 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 00:00:40.312 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 00:00:40.314 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 00:00:40.318 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 00:00:40.515 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 00:00:40.768 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 00:00:41.930 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 00:00:41.988 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .OrderBy(c => c.Name)'
2023-11-07 00:00:42.071 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi) in 1748.6271ms
2023-11-07 00:00:42.074 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 00:00:42.076 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The expression 'c.PointsOfInterest' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see http://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.PopulateIncludeTree(IncludeTreeNode includeTreeNode, Expression expression, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CityInfoApi.Services.CityInfoRepository.GetCitiesAsync() in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Services\CityInfoRepository.cs:line 17
   at CityInfoApi.Controllers.CitiesController.GetCities() in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Controllers\CitiesController.cs:line 23
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 00:00:42.112 +02:00 [DBG] Connection id "0HMUV2F8810AO" completed keep alive response.
2023-11-07 00:00:42.120 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 00:00:42.127 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities - - - 500 - text/plain;+charset=utf-8 2074.8670ms
2023-11-07 00:01:50.013 +02:00 [INF] Application is shutting down...
2023-11-07 00:01:50.016 +02:00 [DBG] Hosting stopping
2023-11-07 00:01:50.027 +02:00 [DBG] Connection id "0HMUV2F8810AO" disconnecting.
2023-11-07 00:01:50.031 +02:00 [DBG] Connection id "0HMUV2F8810AO" stopped.
2023-11-07 00:01:50.032 +02:00 [DBG] Connection id "0HMUV2F8810AO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 00:01:50.038 +02:00 [DBG] Hosting stopped
2023-11-07 00:01:55.514 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 00:01:55.619 +02:00 [DBG] Hosting starting
2023-11-07 00:01:55.687 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 00:01:55.731 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 00:01:55.733 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 00:01:55.734 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 00:01:55.736 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 00:01:55.738 +02:00 [INF] Hosting environment: Development
2023-11-07 00:01:55.740 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 00:01:55.741 +02:00 [DBG] Hosting started
2023-11-07 00:02:03.687 +02:00 [DBG] Connection id "0HMUV2G17HOLC" received FIN.
2023-11-07 00:02:03.697 +02:00 [DBG] Connection id "0HMUV2G17HOLC" accepted.
2023-11-07 00:02:03.700 +02:00 [DBG] Connection id "0HMUV2G17HOLC" started.
2023-11-07 00:02:03.702 +02:00 [DBG] Connection id "0HMUV2G17HOLD" accepted.
2023-11-07 00:02:03.704 +02:00 [DBG] Connection id "0HMUV2G17HOLD" started.
2023-11-07 00:02:03.718 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 00:02:03.743 +02:00 [DBG] Connection id "0HMUV2G17HOLC" stopped.
2023-11-07 00:02:03.746 +02:00 [DBG] Connection id "0HMUV2G17HOLC" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 00:02:03.767 +02:00 [DBG] Connection 0HMUV2G17HOLD established using the following protocol: "Tls12"
2023-11-07 00:02:03.810 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities - -
2023-11-07 00:02:03.814 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 00:02:03.867 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 00:02:03.903 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-11-07 00:02:03.912 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)' with route pattern 'api/Cities' is valid for the request path '/api/cities'
2023-11-07 00:02:03.915 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 00:02:03.917 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 00:02:03.948 +02:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.CityDto]]] GetCities() on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 00:02:03.951 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 00:02:03.952 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 00:02:03.955 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 00:02:03.958 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 00:02:03.961 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 00:02:03.963 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 00:02:04.105 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 00:02:04.296 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 00:02:05.339 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 00:02:05.411 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .OrderBy(c => c.Name)'
2023-11-07 00:02:05.544 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 00:02:05.833 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CityDbModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
            3 -> 3
        SELECT c.Id, c.Description, c.Name, p.Id, p.CityId, p.Description, p.Name
        FROM Cities AS c
        LEFT JOIN PointsOfInterest AS p ON c.Id == p.CityId
        ORDER BY c.Name ASC, c.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
    CityInfoApi.DbContexts.CityInfoDbContext, 
    False, 
    False, 
    True
)'
2023-11-07 00:02:05.887 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 00:02:05.934 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (41ms).
2023-11-07 00:02:05.944 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 00:02:05.968 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 00:02:05.988 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "Cities" AS "c"
LEFT JOIN "PointsOfInterest" AS "p" ON "c"."Id" = "p"."CityId"
ORDER BY "c"."Name", "c"."Id"
2023-11-07 00:02:06.054 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "Cities" AS "c"
LEFT JOIN "PointsOfInterest" AS "p" ON "c"."Id" = "p"."CityId"
ORDER BY "c"."Name", "c"."Id"
2023-11-07 00:02:06.090 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:02:06.132 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:02:06.155 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:02:06.159 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:02:06.165 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:02:06.167 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:02:06.169 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:02:06.172 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:02:06.174 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:02:06.181 +02:00 [DBG] A data reader was disposed.
2023-11-07 00:02:06.190 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 00:02:06.199 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 00:02:06.232 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi) in 2264.0759ms
2023-11-07 00:02:06.236 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 00:02:06.238 +02:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
List`1 -> IEnumerable`1
System.Collections.Generic.List`1[[CityInfoApi.Models.CityDbModel, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.IEnumerable`1[[CityInfoApi.DTOs.CityDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
CityDbModel -> CityDto
CityInfoApi.Models.CityDbModel -> CityInfoApi.DTOs.CityDto

Type Map configuration:
CityDbModel -> CityDto
CityInfoApi.Models.CityDbModel -> CityInfoApi.DTOs.CityDto

Destination Member:
PointsOfInterest

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
PointOfInterestDbModel -> PointOfInterestDto
CityInfoApi.Models.PointOfInterestDbModel -> CityInfoApi.DTOs.PointOfInterestDto
   at lambda_method91(Closure , PointOfInterestDbModel , PointOfInterestDto , ResolutionContext )
   at lambda_method90(Closure , Object , IEnumerable`1 , ResolutionContext )
   --- End of inner exception stack trace ---
   at lambda_method90(Closure , Object , IEnumerable`1 , ResolutionContext )
   --- End of inner exception stack trace ---
   at lambda_method90(Closure , Object , IEnumerable`1 , ResolutionContext )
   at CityInfoApi.Controllers.CitiesController.GetCities() in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Controllers\CitiesController.cs:line 24
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 00:02:06.277 +02:00 [DBG] Connection id "0HMUV2G17HOLD" completed keep alive response.
2023-11-07 00:02:06.286 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 00:02:06.292 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities - - - 500 - text/plain;+charset=utf-8 2486.0211ms
2023-11-07 00:04:16.931 +02:00 [DBG] Connection id "0HMUV2G17HOLD" disconnecting.
2023-11-07 00:04:16.937 +02:00 [DBG] Connection id "0HMUV2G17HOLD" stopped.
2023-11-07 00:04:16.939 +02:00 [DBG] Connection id "0HMUV2G17HOLD" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 00:04:18.523 +02:00 [INF] Application is shutting down...
2023-11-07 00:04:18.525 +02:00 [DBG] Hosting stopping
2023-11-07 00:04:19.707 +02:00 [DBG] Hosting stopped
2023-11-07 00:04:25.605 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 00:04:25.689 +02:00 [DBG] Hosting starting
2023-11-07 00:04:25.757 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 00:04:25.799 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 00:04:25.801 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 00:04:25.802 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 00:04:25.804 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 00:04:25.805 +02:00 [INF] Hosting environment: Development
2023-11-07 00:04:25.806 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 00:04:25.807 +02:00 [DBG] Hosting started
2023-11-07 00:04:27.269 +02:00 [DBG] Connection id "0HMUV2HC0RGT8" received FIN.
2023-11-07 00:04:27.277 +02:00 [DBG] Connection id "0HMUV2HC0RGT8" accepted.
2023-11-07 00:04:27.280 +02:00 [DBG] Connection id "0HMUV2HC0RGT8" started.
2023-11-07 00:04:27.282 +02:00 [DBG] Connection id "0HMUV2HC0RGT9" accepted.
2023-11-07 00:04:27.284 +02:00 [DBG] Connection id "0HMUV2HC0RGT9" started.
2023-11-07 00:04:27.295 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 00:04:27.315 +02:00 [DBG] Connection id "0HMUV2HC0RGT8" stopped.
2023-11-07 00:04:27.318 +02:00 [DBG] Connection id "0HMUV2HC0RGT8" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 00:04:27.330 +02:00 [DBG] Connection 0HMUV2HC0RGT9 established using the following protocol: "Tls12"
2023-11-07 00:04:27.365 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities - -
2023-11-07 00:04:27.367 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 00:04:27.410 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 00:04:27.440 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-11-07 00:04:27.448 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)' with route pattern 'api/Cities' is valid for the request path '/api/cities'
2023-11-07 00:04:27.451 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 00:04:27.454 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 00:04:27.478 +02:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.CityDto]]] GetCities() on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 00:04:27.483 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 00:04:27.485 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 00:04:27.487 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 00:04:27.489 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 00:04:27.490 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 00:04:27.492 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 00:04:27.615 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 00:04:27.796 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 00:04:28.738 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 00:04:28.793 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .OrderBy(c => c.Name)'
2023-11-07 00:04:28.888 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 00:04:29.157 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CityDbModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
            3 -> 3
        SELECT c.Id, c.Description, c.Name, p.Id, p.CityId, p.Description, p.Name
        FROM Cities AS c
        LEFT JOIN PointsOfInterest AS p ON c.Id == p.CityId
        ORDER BY c.Name ASC, c.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
    CityInfoApi.DbContexts.CityInfoDbContext, 
    False, 
    False, 
    True
)'
2023-11-07 00:04:29.205 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 00:04:29.247 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (37ms).
2023-11-07 00:04:29.256 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 00:04:29.278 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 00:04:29.296 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "Cities" AS "c"
LEFT JOIN "PointsOfInterest" AS "p" ON "c"."Id" = "p"."CityId"
ORDER BY "c"."Name", "c"."Id"
2023-11-07 00:04:29.321 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "Cities" AS "c"
LEFT JOIN "PointsOfInterest" AS "p" ON "c"."Id" = "p"."CityId"
ORDER BY "c"."Name", "c"."Id"
2023-11-07 00:04:29.350 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:04:29.383 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:04:29.403 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:04:29.407 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:04:29.411 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:04:29.413 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:04:29.415 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:04:29.417 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:04:29.418 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 00:04:29.424 +02:00 [DBG] A data reader was disposed.
2023-11-07 00:04:29.432 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 00:04:29.438 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 00:04:29.459 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 00:04:29.467 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 00:04:29.468 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 00:04:29.469 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 00:04:29.470 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 00:04:29.472 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.CityDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 00:04:29.618 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi) in 2121.2843ms
2023-11-07 00:04:29.622 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 00:04:29.623 +02:00 [DBG] Connection id "0HMUV2HC0RGT9" completed keep alive response.
2023-11-07 00:04:29.628 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 00:04:29.633 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities - - - 200 1048 application/json;+charset=utf-8 2272.1238ms
2023-11-07 00:06:40.055 +02:00 [DBG] Connection id "0HMUV2HC0RGT9" disconnecting.
2023-11-07 00:06:40.059 +02:00 [DBG] Connection id "0HMUV2HC0RGT9" stopped.
2023-11-07 00:06:40.060 +02:00 [DBG] Connection id "0HMUV2HC0RGT9" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 01:30:55.998 +02:00 [INF] Application is shutting down...
2023-11-07 01:30:56.001 +02:00 [DBG] Hosting stopping
2023-11-07 01:30:56.013 +02:00 [DBG] Hosting stopped
2023-11-07 19:49:44.568 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 19:49:44.726 +02:00 [DBG] Hosting starting
2023-11-07 19:49:45.035 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 19:49:45.077 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 19:49:45.079 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 19:49:45.081 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 19:49:45.083 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 19:49:45.085 +02:00 [INF] Hosting environment: Development
2023-11-07 19:49:45.087 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 19:49:45.089 +02:00 [DBG] Hosting started
2023-11-07 19:51:43.414 +02:00 [DBG] Connection id "0HMUVN8Q1LJRF" received FIN.
2023-11-07 19:51:43.426 +02:00 [DBG] Connection id "0HMUVN8Q1LJRF" accepted.
2023-11-07 19:51:43.429 +02:00 [DBG] Connection id "0HMUVN8Q1LJRF" started.
2023-11-07 19:51:43.430 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" accepted.
2023-11-07 19:51:43.434 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" started.
2023-11-07 19:51:43.450 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 19:51:43.493 +02:00 [DBG] Connection 0HMUVN8Q1LJRG established using the following protocol: "Tls12"
2023-11-07 19:51:43.567 +02:00 [DBG] Connection id "0HMUVN8Q1LJRF" stopped.
2023-11-07 19:51:43.569 +02:00 [DBG] Connection id "0HMUVN8Q1LJRF" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 19:51:43.601 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities - -
2023-11-07 19:51:43.604 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 19:51:43.646 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:51:43.676 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-11-07 19:51:43.684 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)' with route pattern 'api/Cities' is valid for the request path '/api/cities'
2023-11-07 19:51:43.686 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 19:51:43.689 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 19:51:43.725 +02:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.CityDto]]] GetCities() on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 19:51:43.728 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:51:43.730 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:51:43.731 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:51:43.735 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:51:43.736 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:51:43.739 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:51:45.975 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 19:51:46.157 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:51:47.320 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 19:51:47.383 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .OrderBy(c => c.Name)'
2023-11-07 19:51:47.466 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 19:51:47.748 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CityDbModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
            3 -> 3
        SELECT c.Id, c.Description, c.Name, p.Id, p.CityId, p.Description, p.Name
        FROM Cities AS c
        LEFT JOIN PointsOfInterest AS p ON c.Id == p.CityId
        ORDER BY c.Name ASC, c.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
    CityInfoApi.DbContexts.CityInfoDbContext, 
    False, 
    False, 
    True
)'
2023-11-07 19:51:47.847 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 19:51:48.204 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (395ms).
2023-11-07 19:51:48.213 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:51:48.331 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:51:48.356 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "Cities" AS "c"
LEFT JOIN "PointsOfInterest" AS "p" ON "c"."Id" = "p"."CityId"
ORDER BY "c"."Name", "c"."Id"
2023-11-07 19:51:48.393 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "Cities" AS "c"
LEFT JOIN "PointsOfInterest" AS "p" ON "c"."Id" = "p"."CityId"
ORDER BY "c"."Name", "c"."Id"
2023-11-07 19:51:48.429 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:51:48.474 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:51:48.497 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:51:48.502 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:51:48.508 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:51:48.511 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:51:48.512 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:51:48.513 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:51:48.516 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:51:48.524 +02:00 [DBG] A data reader was disposed.
2023-11-07 19:51:48.531 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:51:48.540 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:51:48.565 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 19:51:48.573 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 19:51:48.575 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 19:51:48.575 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 19:51:48.578 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 19:51:48.580 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.CityDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 19:51:48.827 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi) in 5084.2845ms
2023-11-07 19:51:48.830 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 19:51:48.831 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" completed keep alive response.
2023-11-07 19:51:48.838 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 19:51:48.843 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities - - - 200 1048 application/json;+charset=utf-8 5245.8544ms
2023-11-07 19:52:00.574 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/10 - -
2023-11-07 19:52:00.576 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:52:00.578 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/10'
2023-11-07 19:52:00.579 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)' with route pattern 'api/Cities/{id}' is valid for the request path '/api/cities/10'
2023-11-07 19:52:00.581 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:00.582 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:00.597 +02:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.CityDto]] GetCity(Int32, Boolean) on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 19:52:00.599 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:52:00.601 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:52:00.602 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:52:00.605 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:52:00.606 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:52:00.608 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:52:00.610 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:52:00.614 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 19:52:00.617 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 19:52:00.621 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:00.622 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:00.624 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 19:52:00.626 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:00.630 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 19:52:00.632 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-07 19:52:00.634 +02:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:00.635 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:00.637 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:00.639 +02:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 19:52:00.640 +02:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:00.646 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 19:52:00.654 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 19:52:00.665 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 19:52:00.674 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 19:52:00.676 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 19:52:00.680 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:52:00.681 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:52:00.686 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 19:52:00.693 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 19:52:00.696 +02:00 [DBG] A data reader was disposed.
2023-11-07 19:52:00.697 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:52:00.698 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:52:00.702 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 19:52:00.705 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 19:52:00.706 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-07 19:52:00.709 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 19:52:00.710 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-07 19:52:00.730 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi) in 121.9405ms
2023-11-07 19:52:00.732 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:00.733 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" completed keep alive response.
2023-11-07 19:52:00.734 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 19:52:00.736 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/10 - - - 404 161 application/problem+json;+charset=utf-8 160.9827ms
2023-11-07 19:52:03.320 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/10 - -
2023-11-07 19:52:03.323 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:52:03.325 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/10'
2023-11-07 19:52:03.327 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)' with route pattern 'api/Cities/{id}' is valid for the request path '/api/cities/10'
2023-11-07 19:52:03.330 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:03.332 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:03.333 +02:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.CityDto]] GetCity(Int32, Boolean) on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 19:52:03.335 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:52:03.338 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:52:03.341 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:52:03.344 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:52:03.345 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:52:03.347 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:52:03.351 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:52:03.352 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 19:52:03.355 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 19:52:03.357 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:03.358 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:03.359 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 19:52:03.361 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:03.362 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 19:52:03.363 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-07 19:52:03.364 +02:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:03.366 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:03.367 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:03.368 +02:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 19:52:03.369 +02:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:03.419 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 19:52:03.425 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 19:52:03.426 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 19:52:03.427 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:52:03.428 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:52:03.430 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 19:52:03.432 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 19:52:03.434 +02:00 [DBG] A data reader was disposed.
2023-11-07 19:52:03.434 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:52:03.436 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:52:03.438 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 19:52:03.441 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 19:52:03.442 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-07 19:52:03.444 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 19:52:03.445 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-07 19:52:03.446 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi) in 99.5139ms
2023-11-07 19:52:03.448 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:03.449 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" completed keep alive response.
2023-11-07 19:52:03.451 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 19:52:03.452 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/10 - - - 404 161 application/problem+json;+charset=utf-8 131.7969ms
2023-11-07 19:52:04.740 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1 - -
2023-11-07 19:52:04.742 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:52:04.743 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-11-07 19:52:04.745 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)' with route pattern 'api/Cities/{id}' is valid for the request path '/api/cities/1'
2023-11-07 19:52:04.747 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:04.748 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:04.749 +02:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.CityDto]] GetCity(Int32, Boolean) on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 19:52:04.750 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:52:04.753 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:52:04.755 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:52:04.757 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:52:04.759 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:52:04.760 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:52:04.762 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:52:04.763 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 19:52:04.764 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 19:52:04.765 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:04.768 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:04.769 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 19:52:04.771 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:04.772 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 19:52:04.774 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-07 19:52:04.775 +02:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:04.777 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:04.778 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:04.779 +02:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 19:52:04.781 +02:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:04.783 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 19:52:04.785 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 19:52:04.786 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 19:52:04.788 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:52:04.789 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:52:04.791 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 19:52:04.794 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 19:52:04.797 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:52:04.798 +02:00 [DBG] A data reader was disposed.
2023-11-07 19:52:04.799 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:52:04.800 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:52:04.804 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 19:52:04.807 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 19:52:04.808 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 19:52:04.809 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 19:52:04.810 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 19:52:04.811 +02:00 [INF] Executing OkObjectResult, writing value of type 'CityInfoApi.DTOs.CityDto'.
2023-11-07 19:52:04.813 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi) in 52.9601ms
2023-11-07 19:52:04.815 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:04.817 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" completed keep alive response.
2023-11-07 19:52:04.818 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 19:52:04.819 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1 - - - 200 126 application/json;+charset=utf-8 79.1025ms
2023-11-07 19:52:23.690 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1?includepointsofinterest - -
2023-11-07 19:52:23.692 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:52:23.694 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-11-07 19:52:23.695 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)' with route pattern 'api/Cities/{id}' is valid for the request path '/api/cities/1'
2023-11-07 19:52:23.697 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:23.698 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:23.699 +02:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.CityDto]] GetCity(Int32, Boolean) on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 19:52:23.700 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:52:23.702 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:52:23.703 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:52:23.705 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:52:23.706 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:52:23.708 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:52:23.710 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:52:23.716 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 19:52:23.718 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 19:52:23.719 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:23.721 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:23.722 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 19:52:23.723 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:23.726 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 19:52:23.729 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-11-07 19:52:23.735 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:23.736 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:23.737 +02:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 19:52:23.739 +02:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:23.740 +02:00 [DBG] The request has model state errors, returning an error response.
2023-11-07 19:52:23.748 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-11-07 19:52:23.749 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 19:52:23.752 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 19:52:23.752 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-07 19:52:23.755 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 19:52:23.757 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-11-07 19:52:23.778 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi) in 69.9547ms
2023-11-07 19:52:23.780 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:23.781 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" completed keep alive response.
2023-11-07 19:52:23.782 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1?includepointsofinterest - - - 400 257 application/problem+json;+charset=utf-8 92.5383ms
2023-11-07 19:52:36.099 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1?includepointsofinterest=true - -
2023-11-07 19:52:36.101 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:52:36.102 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-11-07 19:52:36.103 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)' with route pattern 'api/Cities/{id}' is valid for the request path '/api/cities/1'
2023-11-07 19:52:36.105 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:36.106 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:36.108 +02:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.CityDto]] GetCity(Int32, Boolean) on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 19:52:36.110 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:52:36.113 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:52:36.115 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:52:36.120 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:52:36.122 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:52:36.124 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:52:36.127 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 19:52:36.128 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 19:52:36.129 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 19:52:36.131 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:36.132 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:36.134 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 19:52:36.135 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 19:52:36.136 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 19:52:36.137 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-11-07 19:52:36.139 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:36.140 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:36.141 +02:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 19:52:36.142 +02:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 19:52:36.144 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 19:52:36.146 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 19:52:36.150 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 19:52:36.173 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 19:52:36.178 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 19:52:36.181 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-07 19:52:36.182 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:52:36.183 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:52:36.185 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 19:52:36.187 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 19:52:36.190 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:52:36.191 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:52:36.192 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:52:36.194 +02:00 [DBG] A data reader was disposed.
2023-11-07 19:52:36.195 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:52:36.197 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:52:36.198 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 19:52:36.201 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 19:52:36.202 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 19:52:36.203 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 19:52:36.203 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 19:52:36.205 +02:00 [INF] Executing OkObjectResult, writing value of type 'CityInfoApi.DTOs.CityDto'.
2023-11-07 19:52:36.206 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi) in 81.7375ms
2023-11-07 19:52:36.208 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 19:52:36.209 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" completed keep alive response.
2023-11-07 19:52:36.210 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 19:52:36.211 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1?includepointsofinterest=true - - - 200 331 application/json;+charset=utf-8 112.2147ms
2023-11-07 19:52:42.386 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - -
2023-11-07 19:52:42.387 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:52:42.388 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:52:42.389 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:52:42.391 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:52:42.392 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:52:42.395 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 19:52:42.399 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:52:42.401 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:52:42.402 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:52:42.404 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:52:42.406 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:52:42.407 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 19:52:42.409 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 2.2346ms
2023-11-07 19:52:42.412 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:52:42.414 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'CityInfoApi.Services.CityInfoRepository' while attempting to activate 'CityInfoApi.Controllers.PointsOfInterestController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method158(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 19:52:42.430 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" completed keep alive response.
2023-11-07 19:52:42.434 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - - - 500 - text/plain;+charset=utf-8 47.4776ms
2023-11-07 19:53:14.886 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - -
2023-11-07 19:53:14.888 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:53:14.891 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:53:14.892 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:53:14.893 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:53:14.894 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:53:14.895 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 19:53:14.897 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:53:14.899 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:53:14.900 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:53:14.902 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:53:14.903 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:53:14.905 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 19:53:14.907 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 2.248ms
2023-11-07 19:53:14.909 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:53:14.910 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'CityInfoApi.Services.CityInfoRepository' while attempting to activate 'CityInfoApi.Controllers.PointsOfInterestController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method158(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 19:53:14.919 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" completed keep alive response.
2023-11-07 19:53:14.922 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - - - 500 - text/plain;+charset=utf-8 35.9646ms
2023-11-07 19:53:42.527 +02:00 [INF] Application is shutting down...
2023-11-07 19:53:42.528 +02:00 [DBG] Hosting stopping
2023-11-07 19:53:42.543 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" disconnecting.
2023-11-07 19:53:42.546 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" stopped.
2023-11-07 19:53:42.548 +02:00 [DBG] Connection id "0HMUVN8Q1LJRG" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 19:53:42.553 +02:00 [DBG] Hosting stopped
2023-11-07 19:53:54.833 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 19:53:54.911 +02:00 [DBG] Hosting starting
2023-11-07 19:53:55.041 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 19:53:55.094 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 19:53:55.095 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 19:53:55.096 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 19:53:55.097 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 19:53:55.099 +02:00 [INF] Hosting environment: Development
2023-11-07 19:53:55.100 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 19:53:55.101 +02:00 [DBG] Hosting started
2023-11-07 19:54:00.141 +02:00 [DBG] Connection id "0HMUVNA2PJHPM" received FIN.
2023-11-07 19:54:00.150 +02:00 [DBG] Connection id "0HMUVNA2PJHPM" accepted.
2023-11-07 19:54:00.157 +02:00 [DBG] Connection id "0HMUVNA2PJHPM" started.
2023-11-07 19:54:00.159 +02:00 [DBG] Connection id "0HMUVNA2PJHPN" accepted.
2023-11-07 19:54:00.161 +02:00 [DBG] Connection id "0HMUVNA2PJHPN" started.
2023-11-07 19:54:00.183 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 19:54:00.222 +02:00 [DBG] Connection id "0HMUVNA2PJHPM" stopped.
2023-11-07 19:54:00.225 +02:00 [DBG] Connection id "0HMUVNA2PJHPM" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 19:54:00.229 +02:00 [DBG] Connection 0HMUVNA2PJHPN established using the following protocol: "Tls12"
2023-11-07 19:54:00.255 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - -
2023-11-07 19:54:00.258 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 19:54:00.290 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:54:00.313 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:54:00.320 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:54:00.322 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:54:00.326 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:54:00.352 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 19:54:00.356 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:54:00.358 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:54:00.360 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:54:00.362 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:54:00.364 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:54:00.367 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 19:54:00.373 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 3.9008ms
2023-11-07 19:54:00.376 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:54:00.378 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'CityInfoApi.Services.CityInfoRepository' while attempting to activate 'CityInfoApi.Controllers.PointsOfInterestController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 19:54:00.392 +02:00 [DBG] Connection id "0HMUVNA2PJHPN" completed keep alive response.
2023-11-07 19:54:00.396 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - - - 500 - text/plain;+charset=utf-8 142.4767ms
2023-11-07 19:55:08.153 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/4/pointsofinterests - -
2023-11-07 19:55:08.156 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:55:08.158 +02:00 [DBG] No candidates found for the request path '/api/cities/4/pointsofinterests'
2023-11-07 19:55:08.160 +02:00 [DBG] Request did not match any endpoints
2023-11-07 19:55:08.161 +02:00 [DBG] Connection id "0HMUVNA2PJHPN" completed keep alive response.
2023-11-07 19:55:08.162 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/4/pointsofinterests - - - 404 0 - 9.3180ms
2023-11-07 19:55:09.792 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/4/pointsofinterests - -
2023-11-07 19:55:10.344 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:55:10.349 +02:00 [DBG] No candidates found for the request path '/api/cities/4/pointsofinterests'
2023-11-07 19:55:10.350 +02:00 [DBG] Request did not match any endpoints
2023-11-07 19:55:10.351 +02:00 [DBG] Connection id "0HMUVNA2PJHPN" completed keep alive response.
2023-11-07 19:55:10.352 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/4/pointsofinterests - - - 404 0 - 560.1433ms
2023-11-07 19:55:13.177 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterests - -
2023-11-07 19:55:13.179 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:55:13.180 +02:00 [DBG] No candidates found for the request path '/api/cities/1/pointsofinterests'
2023-11-07 19:55:13.181 +02:00 [DBG] Request did not match any endpoints
2023-11-07 19:55:13.182 +02:00 [DBG] Connection id "0HMUVNA2PJHPN" completed keep alive response.
2023-11-07 19:55:13.183 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterests - - - 404 0 - 5.5740ms
2023-11-07 19:55:20.366 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterests - -
2023-11-07 19:55:20.368 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:55:20.370 +02:00 [DBG] No candidates found for the request path '/api/cities/1/pointsofinterests'
2023-11-07 19:55:20.371 +02:00 [DBG] Request did not match any endpoints
2023-11-07 19:55:20.373 +02:00 [DBG] Connection id "0HMUVNA2PJHPN" completed keep alive response.
2023-11-07 19:55:20.374 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterests - - - 404 0 - 7.8447ms
2023-11-07 19:55:55.653 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - -
2023-11-07 19:55:55.661 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:55:55.662 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:55:55.663 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:55:55.665 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:55:55.666 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:55:55.668 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 19:55:55.669 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:55:55.671 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:55:55.672 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:55:55.674 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:55:55.676 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:55:55.677 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 19:55:55.679 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 1.6518ms
2023-11-07 19:55:55.680 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:55:55.682 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'CityInfoApi.Services.CityInfoRepository' while attempting to activate 'CityInfoApi.Controllers.PointsOfInterestController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 19:55:55.688 +02:00 [DBG] Connection id "0HMUVNA2PJHPN" completed keep alive response.
2023-11-07 19:55:55.689 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - - - 500 - text/plain;+charset=utf-8 35.7747ms
2023-11-07 19:56:29.986 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - -
2023-11-07 19:56:30.027 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:56:30.028 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:56:30.030 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:56:30.031 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:56:30.032 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:56:30.033 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 19:56:30.035 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:56:30.037 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:56:30.038 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:56:30.041 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:56:30.043 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:56:30.044 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 19:56:30.046 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 1.7772ms
2023-11-07 19:56:30.048 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:56:30.049 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'CityInfoApi.Services.CityInfoRepository' while attempting to activate 'CityInfoApi.Controllers.PointsOfInterestController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 19:56:30.055 +02:00 [DBG] Connection id "0HMUVNA2PJHPN" completed keep alive response.
2023-11-07 19:56:30.056 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - - - 500 - text/plain;+charset=utf-8 70.7050ms
2023-11-07 19:56:54.189 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - -
2023-11-07 19:56:54.197 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:56:54.198 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:56:54.199 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:56:54.201 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:56:54.202 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:56:54.445 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 19:56:54.460 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:56:54.470 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:56:54.475 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:56:54.477 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:56:54.478 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:56:54.480 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 19:56:54.482 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 2.1649ms
2023-11-07 19:56:54.484 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:56:54.485 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'CityInfoApi.Services.CityInfoRepository' while attempting to activate 'CityInfoApi.Controllers.PointsOfInterestController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 19:56:54.491 +02:00 [DBG] Connection id "0HMUVNA2PJHPN" completed keep alive response.
2023-11-07 19:56:54.492 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - - - 500 - text/plain;+charset=utf-8 302.4832ms
2023-11-07 19:59:39.946 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 19:59:40.036 +02:00 [DBG] Hosting starting
2023-11-07 19:59:40.095 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 19:59:40.129 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 19:59:40.131 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 19:59:40.133 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 19:59:40.134 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 19:59:40.135 +02:00 [INF] Hosting environment: Development
2023-11-07 19:59:40.136 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 19:59:40.137 +02:00 [DBG] Hosting started
2023-11-07 19:59:46.917 +02:00 [DBG] Connection id "0HMUVNDA4N2U7" received FIN.
2023-11-07 19:59:46.926 +02:00 [DBG] Connection id "0HMUVNDA4N2U7" accepted.
2023-11-07 19:59:46.929 +02:00 [DBG] Connection id "0HMUVNDA4N2U7" started.
2023-11-07 19:59:46.930 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" accepted.
2023-11-07 19:59:46.932 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" started.
2023-11-07 19:59:46.943 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 19:59:46.963 +02:00 [DBG] Connection id "0HMUVNDA4N2U7" stopped.
2023-11-07 19:59:46.966 +02:00 [DBG] Connection id "0HMUVNDA4N2U7" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 19:59:46.978 +02:00 [DBG] Connection 0HMUVNDA4N2U8 established using the following protocol: "Tls12"
2023-11-07 19:59:47.013 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - -
2023-11-07 19:59:47.015 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 19:59:47.057 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:59:47.086 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:59:47.094 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:59:47.096 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:59:47.099 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:59:47.135 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 19:59:47.139 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:59:47.140 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:59:47.142 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:59:47.145 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:59:47.147 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:59:47.149 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 19:59:47.282 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 19:59:47.439 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 19:59:47.446 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 19:59:47.449 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 19:59:47.451 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 19:59:47.452 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 19:59:47.453 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 19:59:47.455 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 19:59:48.369 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 19:59:48.428 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .Where(p => p.CityId == __cityId_0)'
2023-11-07 19:59:48.663 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterestDbModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
    CityInfoApi.DbContexts.CityInfoDbContext, 
    False, 
    False, 
    True
)'
2023-11-07 19:59:48.717 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 19:59:48.762 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (39ms).
2023-11-07 19:59:48.776 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:59:48.799 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:59:48.818 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 19:59:48.848 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 19:59:48.875 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:59:48.905 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:59:48.913 +02:00 [DBG] A data reader was disposed.
2023-11-07 19:59:48.920 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:59:48.928 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:59:48.948 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 19:59:48.954 +02:00 [DBG] Attempting to select an output formatter based on Accept header '["application/xml"]'.
2023-11-07 19:59:48.969 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter' and content type 'application/xml' to write the response.
2023-11-07 19:59:48.972 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.PointOfInterestDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 19:59:48.998 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 1843.2799ms
2023-11-07 19:59:49.000 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:59:49.002 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" completed keep alive response.
2023-11-07 19:59:49.007 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 19:59:49.013 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - - - 200 488 application/xml;+charset=utf-8 2003.7175ms
2023-11-07 19:59:53.938 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - -
2023-11-07 19:59:53.940 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 19:59:53.941 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:59:53.943 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-11-07 19:59:53.945 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:59:53.946 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:59:53.947 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 19:59:53.949 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 19:59:53.950 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 19:59:53.951 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 19:59:53.953 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 19:59:53.955 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 19:59:53.956 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 19:59:53.958 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 19:59:53.961 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 19:59:53.962 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 19:59:53.964 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 19:59:53.965 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 19:59:53.966 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 19:59:53.967 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 19:59:53.970 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 19:59:53.975 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 19:59:53.977 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 19:59:53.979 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:59:53.980 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:59:53.982 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 19:59:53.984 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 19:59:53.986 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:59:53.988 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 19:59:53.990 +02:00 [DBG] A data reader was disposed.
2023-11-07 19:59:53.990 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 19:59:53.991 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 19:59:53.993 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 19:59:53.997 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 19:59:53.998 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 19:59:53.998 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 19:59:53.999 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 19:59:54.000 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.PointOfInterestDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 19:59:54.121 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 164.5323ms
2023-11-07 19:59:54.123 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 19:59:54.124 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" completed keep alive response.
2023-11-07 19:59:54.125 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 19:59:54.126 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - - - 200 207 application/json;+charset=utf-8 188.4605ms
2023-11-07 20:00:07.634 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/10/pointsofinterest - -
2023-11-07 20:00:07.636 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:00:07.637 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/10/pointsofinterest'
2023-11-07 20:00:07.638 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/10/pointsofinterest'
2023-11-07 20:00:07.639 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:00:07.642 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:00:07.643 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:00:07.645 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:00:07.646 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:00:07.648 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:00:07.651 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:00:07.652 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:00:07.654 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:00:07.657 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:00:07.658 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:00:07.660 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:00:07.661 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:00:07.663 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:00:07.665 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:00:07.667 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:00:07.717 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:00:07.720 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:00:07.722 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:00:07.723 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:00:07.724 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:00:07.726 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:00:07.727 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:00:07.730 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:00:07.731 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:00:07.733 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:00:07.735 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:00:07.738 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:00:07.738 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:00:07.739 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:00:07.740 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:00:07.741 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.PointOfInterestDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 20:00:07.743 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 88.9149ms
2023-11-07 20:00:07.744 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:00:07.745 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" completed keep alive response.
2023-11-07 20:00:07.746 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:00:07.748 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/10/pointsofinterest - - - 200 2 application/json;+charset=utf-8 114.4805ms
2023-11-07 20:00:12.128 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/20/pointsofinterest - -
2023-11-07 20:00:12.130 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:00:12.132 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/20/pointsofinterest'
2023-11-07 20:00:12.134 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/20/pointsofinterest'
2023-11-07 20:00:12.136 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:00:12.137 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:00:12.138 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:00:12.141 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:00:12.142 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:00:12.144 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:00:12.147 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:00:12.149 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:00:12.151 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:00:12.153 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:00:12.154 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:00:12.155 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:00:12.156 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:00:12.158 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:00:12.159 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:00:12.160 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:00:12.161 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:00:12.163 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:00:12.165 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:00:12.168 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:00:12.169 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:00:12.170 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:00:12.172 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:00:12.174 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:00:12.175 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:00:12.176 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:00:12.177 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:00:12.180 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:00:12.181 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:00:12.182 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:00:12.183 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:00:12.184 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.PointOfInterestDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 20:00:12.185 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 34.698ms
2023-11-07 20:00:12.187 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:00:12.188 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" completed keep alive response.
2023-11-07 20:00:12.189 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:00:12.190 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/20/pointsofinterest - - - 200 2 application/json;+charset=utf-8 61.4132ms
2023-11-07 20:00:50.342 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - -
2023-11-07 20:00:50.345 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:00:50.346 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-11-07 20:00:50.347 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-11-07 20:00:50.349 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:00:50.350 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:00:50.351 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:00:50.353 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:00:50.354 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:00:50.356 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:00:50.358 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:00:50.360 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:00:50.362 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:00:50.364 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:00:50.366 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:00:50.368 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:00:50.370 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:00:50.372 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:00:50.373 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:00:50.374 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:00:50.377 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:00:50.379 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:00:50.380 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:00:50.381 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:00:50.383 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:00:50.384 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:00:50.386 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:00:50.388 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:00:50.389 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:00:50.390 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:00:50.392 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:00:50.394 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:00:50.396 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:00:50.399 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:00:50.399 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:00:50.400 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:00:50.401 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:00:50.402 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.PointOfInterestDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 20:00:50.404 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 41.6588ms
2023-11-07 20:00:50.405 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:00:50.406 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" completed keep alive response.
2023-11-07 20:00:50.408 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:00:50.410 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - - - 200 207 application/json;+charset=utf-8 67.5850ms
2023-11-07 20:01:01.875 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/10/pointsofinterest - -
2023-11-07 20:01:01.877 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:01:01.879 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/10/pointsofinterest'
2023-11-07 20:01:01.881 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/10/pointsofinterest'
2023-11-07 20:01:01.882 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:01:01.883 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:01:01.884 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:01:01.886 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:01:01.888 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:01:01.889 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:01:01.892 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:01:01.893 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:01:01.895 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:01:01.897 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:01:01.899 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:01:01.900 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:01:01.902 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:01:01.903 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:01:01.904 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:01:01.905 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:01:01.906 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:01:01.908 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:01:01.909 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:01:01.910 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:01:01.914 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:01:01.916 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:01:01.919 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:01:01.922 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:01:01.922 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:01:01.924 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:01:01.926 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:01:01.929 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:01:01.930 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:01:01.931 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:01:01.932 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:01:01.934 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.PointOfInterestDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 20:01:01.935 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 40.4604ms
2023-11-07 20:01:01.937 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:01:01.938 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" completed keep alive response.
2023-11-07 20:01:01.939 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:01:01.940 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/10/pointsofinterest - - - 200 2 application/json;+charset=utf-8 64.7702ms
2023-11-07 20:02:02.195 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/10/pointsofinterest - -
2023-11-07 20:02:02.198 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:02:02.199 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/10/pointsofinterest'
2023-11-07 20:02:02.201 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/10/pointsofinterest'
2023-11-07 20:02:02.202 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:02:02.204 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:02:02.208 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:02:02.211 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:02:02.213 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:02:02.215 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:02:02.217 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:02:02.218 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:02:02.220 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:02:02.222 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:02:02.223 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:02:02.224 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:02:02.226 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:02:02.227 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:02:02.229 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:02:02.230 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:02:02.234 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:02:02.237 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .Where(p => p.CityId == __cityId_0)'
2023-11-07 20:02:02.243 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterestDbModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
    CityInfoApi.DbContexts.CityInfoDbContext, 
    False, 
    False, 
    True
)'
2023-11-07 20:02:02.247 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:02:02.249 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:02:02.250 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:02:02.252 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:02:02.254 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:02:02.257 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:02:02.259 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:02:02.260 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:02:02.262 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:02:02.264 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:02:02.266 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:02:02.267 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:02:02.268 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:02:02.268 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:02:02.270 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.PointOfInterestDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 20:02:02.271 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 51.105ms
2023-11-07 20:02:02.272 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:02:02.274 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" completed keep alive response.
2023-11-07 20:02:02.275 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:02:02.276 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/10/pointsofinterest - - - 200 2 application/json;+charset=utf-8 81.1271ms
2023-11-07 20:02:03.831 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/10/pointsofinterest - -
2023-11-07 20:02:03.833 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:02:03.834 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/10/pointsofinterest'
2023-11-07 20:02:03.835 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/10/pointsofinterest'
2023-11-07 20:02:03.837 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:02:03.838 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:02:03.839 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:02:03.840 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:02:03.842 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:02:03.843 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:02:03.846 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:02:03.848 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:02:03.849 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:02:03.851 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:02:03.852 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:02:03.854 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:02:03.855 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:02:03.857 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:02:03.858 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:02:03.859 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:02:03.861 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:02:03.864 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:02:03.865 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:02:03.866 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:02:03.867 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:02:03.868 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:02:03.870 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."CityId" = @__cityId_0
2023-11-07 20:02:03.872 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:02:03.873 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:02:03.874 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:02:03.875 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:02:03.879 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:02:03.880 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:02:03.881 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:02:03.882 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:02:03.883 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.PointOfInterestDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 20:02:03.885 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 35.4469ms
2023-11-07 20:02:03.887 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:02:03.888 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" completed keep alive response.
2023-11-07 20:02:03.890 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:02:03.891 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/10/pointsofinterest - - - 200 2 application/json;+charset=utf-8 59.6989ms
2023-11-07 20:04:14.563 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" disconnecting.
2023-11-07 20:04:14.567 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" stopped.
2023-11-07 20:04:14.568 +02:00 [DBG] Connection id "0HMUVNDA4N2U8" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:05:24.657 +02:00 [INF] Application is shutting down...
2023-11-07 20:05:24.659 +02:00 [DBG] Hosting stopping
2023-11-07 20:05:24.668 +02:00 [DBG] Hosting stopped
2023-11-07 20:05:31.051 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:05:31.140 +02:00 [DBG] Hosting starting
2023-11-07 20:05:31.208 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:05:31.244 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:05:31.246 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:05:31.247 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:05:31.249 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:05:31.250 +02:00 [INF] Hosting environment: Development
2023-11-07 20:05:31.251 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:05:31.252 +02:00 [DBG] Hosting started
2023-11-07 20:05:42.017 +02:00 [INF] Application is shutting down...
2023-11-07 20:05:42.019 +02:00 [DBG] Hosting stopping
2023-11-07 20:05:42.029 +02:00 [DBG] Hosting stopped
2023-11-07 20:05:48.049 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:05:48.128 +02:00 [DBG] Hosting starting
2023-11-07 20:05:48.189 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:05:48.224 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:05:48.227 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:05:48.229 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:05:48.230 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:05:48.232 +02:00 [INF] Hosting environment: Development
2023-11-07 20:05:48.233 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:05:48.234 +02:00 [DBG] Hosting started
2023-11-07 20:05:48.955 +02:00 [DBG] Connection id "0HMUVNGM1CB5G" received FIN.
2023-11-07 20:05:48.965 +02:00 [DBG] Connection id "0HMUVNGM1CB5G" accepted.
2023-11-07 20:05:48.968 +02:00 [DBG] Connection id "0HMUVNGM1CB5G" started.
2023-11-07 20:05:48.970 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" accepted.
2023-11-07 20:05:48.973 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" started.
2023-11-07 20:05:48.985 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:05:49.007 +02:00 [DBG] Connection id "0HMUVNGM1CB5G" stopped.
2023-11-07 20:05:49.009 +02:00 [DBG] Connection id "0HMUVNGM1CB5G" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:05:49.021 +02:00 [DBG] Connection 0HMUVNGM1CB5H established using the following protocol: "Tls12"
2023-11-07 20:05:49.058 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/10/pointsofinterest - -
2023-11-07 20:05:49.061 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:05:49.105 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:05:49.133 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/10/pointsofinterest'
2023-11-07 20:05:49.141 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/10/pointsofinterest'
2023-11-07 20:05:49.144 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:05:49.147 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:05:49.181 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:05:49.185 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:05:49.186 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:05:49.189 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:05:49.191 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:05:49.192 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:05:49.195 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:05:49.320 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:05:49.491 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:05:49.495 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:05:49.498 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:05:49.501 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:05:49.502 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:05:49.503 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:05:49.507 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:05:50.403 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:05:50.484 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:05:50.542 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 20:05:50.818 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:05:50.872 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:05:50.916 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (39ms).
2023-11-07 20:05:50.931 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:05:50.953 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:05:50.977 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:05:51.007 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:05:51.020 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:05:51.028 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:05:51.035 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:05:51.041 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:05:51.047 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:05:51.048 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-07 20:05:51.052 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 20:05:51.053 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-07 20:05:51.197 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 1997.839ms
2023-11-07 20:05:51.200 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:05:51.201 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:05:51.208 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:05:51.212 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/10/pointsofinterest - - - 404 161 application/problem+json;+charset=utf-8 2158.2539ms
2023-11-07 20:05:55.513 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/1 - -
2023-11-07 20:05:55.515 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:05:55.517 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:05:55.518 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:05:55.520 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:05:55.521 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:05:55.526 +02:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:05:55.529 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:05:55.530 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:05:55.531 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:05:55.533 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:05:55.535 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:05:55.536 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:05:55.538 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:05:55.540 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:05:55.542 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:05:55.543 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:05:55.544 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:05:55.545 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:05:55.546 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:05:55.548 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:05:55.549 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:05:55.550 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:05:55.552 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:05:55.553 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:05:55.554 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:05:55.561 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:05:55.565 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Any(c => c.Id == __cityId_0)'
2023-11-07 20:05:55.573 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:05:55.583 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:05:55.585 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-07 20:05:55.586 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:05:55.587 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:05:55.589 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:05:55.631 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:05:55.638 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:05:55.640 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:05:55.641 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:05:55.644 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .FirstOrDefault(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)'
2023-11-07 20:05:55.648 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterestDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterestDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:05:55.653 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:05:55.654 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:05:55.656 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:05:55.657 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:05:55.659 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:05:55.663 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:05:55.682 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:05:55.707 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:05:55.709 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:05:55.711 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:05:55.720 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:05:55.727 +02:00 [DBG] Attempting to select an output formatter based on Accept header '["application/xml"]'.
2023-11-07 20:05:55.732 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter' and content type 'application/xml' to write the response.
2023-11-07 20:05:55.734 +02:00 [INF] Executing OkObjectResult, writing value of type 'CityInfoApi.DTOs.PointOfInterestDto'.
2023-11-07 20:05:55.742 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi) in 205.2247ms
2023-11-07 20:05:55.744 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:05:55.745 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:05:55.746 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:05:55.747 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/1 - - - 200 269 application/xml;+charset=utf-8 234.2884ms
2023-11-07 20:05:59.162 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/1 - -
2023-11-07 20:05:59.164 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:05:59.165 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:05:59.166 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:05:59.167 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:05:59.168 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:05:59.169 +02:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:05:59.171 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:05:59.173 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:05:59.175 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:05:59.177 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:05:59.179 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:05:59.180 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:05:59.184 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:05:59.185 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:05:59.187 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:05:59.188 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:05:59.190 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:05:59.192 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:05:59.194 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:05:59.195 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:05:59.196 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:05:59.197 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:05:59.199 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:05:59.200 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:05:59.201 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:05:59.251 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:05:59.258 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:05:59.259 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:05:59.260 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:05:59.262 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:05:59.263 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:05:59.265 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:05:59.267 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:05:59.268 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:05:59.269 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:05:59.270 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:05:59.271 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:05:59.273 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:05:59.274 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:05:59.276 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:05:59.278 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:05:59.280 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:05:59.282 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:05:59.283 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:05:59.284 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:05:59.285 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:05:59.288 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:05:59.288 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:05:59.289 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:05:59.291 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:05:59.292 +02:00 [INF] Executing OkObjectResult, writing value of type 'CityInfoApi.DTOs.PointOfInterestDto'.
2023-11-07 20:05:59.295 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi) in 114.7802ms
2023-11-07 20:05:59.296 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:05:59.297 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:05:59.299 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:05:59.300 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/1 - - - 200 96 application/json;+charset=utf-8 138.2129ms
2023-11-07 20:06:00.939 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/2 - -
2023-11-07 20:06:00.941 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:06:00.943 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/2'
2023-11-07 20:06:00.945 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/2'
2023-11-07 20:06:00.946 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:00.947 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:00.949 +02:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:06:00.951 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:06:00.953 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:06:00.955 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:06:00.959 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:06:00.962 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:06:00.964 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:00.966 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:00.967 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:00.970 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:06:00.971 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:00.972 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:00.974 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:00.976 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:00.977 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:06:00.978 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:06:00.980 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:00.981 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:00.982 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:06:00.983 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:00.985 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:06:00.987 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:00.988 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:06:00.989 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:00.991 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:00.993 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:06:00.995 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:06:00.997 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:00.998 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:00.999 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:01.001 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:01.002 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:06:01.003 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:01.005 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:01.006 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:06:01.009 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:06:01.011 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:01.012 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:01.013 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:01.014 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:01.016 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:06:01.019 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:06:01.020 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:06:01.020 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:06:01.021 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:06:01.022 +02:00 [INF] Executing OkObjectResult, writing value of type 'CityInfoApi.DTOs.PointOfInterestDto'.
2023-11-07 20:06:01.024 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi) in 60.3379ms
2023-11-07 20:06:01.026 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:01.027 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:06:01.028 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:06:01.029 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/2 - - - 200 108 application/json;+charset=utf-8 90.0847ms
2023-11-07 20:06:03.383 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/3 - -
2023-11-07 20:06:03.385 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:06:03.386 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/3'
2023-11-07 20:06:03.387 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/3'
2023-11-07 20:06:03.388 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:03.389 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:03.391 +02:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:06:03.393 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:06:03.395 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:06:03.396 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:06:03.398 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:06:03.400 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:06:03.401 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:03.402 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:03.403 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:03.405 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:06:03.406 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:03.408 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:03.409 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:03.410 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:03.412 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:06:03.413 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:06:03.414 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:03.415 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:03.417 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:06:03.418 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:03.419 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:06:03.421 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:03.422 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:06:03.424 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:03.426 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:03.427 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:06:03.429 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:06:03.431 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:03.432 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:03.433 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:03.434 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:03.435 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:06:03.436 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:03.438 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:03.439 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:06:03.442 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:06:03.444 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:03.445 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:03.446 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:03.447 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:06:03.450 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:06:03.451 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-07 20:06:03.453 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 20:06:03.454 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-07 20:06:03.456 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi) in 54.5523ms
2023-11-07 20:06:03.458 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:03.459 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:06:03.461 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:06:03.463 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/3 - - - 404 161 application/problem+json;+charset=utf-8 79.5454ms
2023-11-07 20:06:06.273 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/1 - -
2023-11-07 20:06:06.274 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:06:06.275 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:06:06.277 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:06:06.279 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:06.280 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:06.282 +02:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:06:06.284 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:06:06.286 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:06:06.288 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:06:06.291 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:06:06.294 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:06:06.296 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:06.298 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:06.301 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:06.304 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:06:06.306 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:06.307 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:06.310 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:06.311 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:06.312 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:06:06.313 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:06:06.315 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:06.316 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:06.317 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:06:06.318 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:06.320 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:06:06.322 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:06.323 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:06:06.324 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:06.325 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:06.327 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:06:06.329 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:06:06.331 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:06.332 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:06.333 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:06.334 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:06.335 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:06:06.336 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:06.337 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:06.339 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:06:06.341 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:06:06.343 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:06.345 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:06.346 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:06.347 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:06.349 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:06:06.351 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:06:06.352 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:06:06.353 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:06:06.354 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:06:06.356 +02:00 [INF] Executing OkObjectResult, writing value of type 'CityInfoApi.DTOs.PointOfInterestDto'.
2023-11-07 20:06:06.358 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi) in 61.7069ms
2023-11-07 20:06:06.360 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:06.361 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:06:06.363 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:06:06.364 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/1 - - - 200 96 application/json;+charset=utf-8 91.0581ms
2023-11-07 20:06:10.611 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/4/pointsofinterest/1 - -
2023-11-07 20:06:10.613 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:06:10.614 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/4/pointsofinterest/1'
2023-11-07 20:06:10.615 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/4/pointsofinterest/1'
2023-11-07 20:06:10.616 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:10.617 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:10.618 +02:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:06:10.620 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:06:10.621 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:06:10.623 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:06:10.625 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:06:10.627 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:06:10.629 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:10.631 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:10.632 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:10.633 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:06:10.635 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:10.636 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:10.638 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:10.639 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:10.641 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:06:10.643 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:06:10.644 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:10.646 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:10.647 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:06:10.648 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:10.650 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:06:10.651 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:10.653 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:06:10.654 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:10.655 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:10.656 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:06:10.658 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:06:10.661 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:10.662 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:10.663 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:10.665 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:06:10.667 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:06:10.668 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-07 20:06:10.670 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 20:06:10.671 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-07 20:06:10.673 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi) in 43.4565ms
2023-11-07 20:06:10.674 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:10.677 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:06:10.678 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:06:10.679 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/4/pointsofinterest/1 - - - 404 161 application/problem+json;+charset=utf-8 67.5953ms
2023-11-07 20:06:14.016 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/10 - -
2023-11-07 20:06:14.018 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:06:14.019 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/10'
2023-11-07 20:06:14.021 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/10'
2023-11-07 20:06:14.023 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:14.024 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:14.025 +02:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:06:14.028 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:06:14.030 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:06:14.032 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:06:14.036 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:06:14.038 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:06:14.040 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:14.042 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:14.043 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:14.046 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:06:14.048 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:14.049 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:14.050 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:14.051 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:14.052 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:06:14.054 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:06:14.055 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:14.056 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:14.057 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:06:14.058 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:06:14.061 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:06:14.064 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:14.065 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:06:14.066 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:14.067 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:14.068 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:06:14.070 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:06:14.073 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:14.074 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:14.075 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:14.078 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:14.079 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:06:14.081 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:14.082 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:14.083 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:06:14.085 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:06:14.087 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:14.088 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:14.089 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:14.090 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:06:14.092 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:06:14.094 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-07 20:06:14.097 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 20:06:14.098 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-07 20:06:14.100 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi) in 59.2764ms
2023-11-07 20:06:14.101 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)'
2023-11-07 20:06:14.102 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:06:14.103 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:06:14.104 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest/10 - - - 404 161 application/problem+json;+charset=utf-8 87.6768ms
2023-11-07 20:06:18.242 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities - -
2023-11-07 20:06:18.245 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:06:18.247 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-11-07 20:06:18.248 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)' with route pattern 'api/Cities' is valid for the request path '/api/cities'
2023-11-07 20:06:18.250 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 20:06:18.251 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 20:06:18.254 +02:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.CityDto]]] GetCities() on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 20:06:18.256 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:06:18.258 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:06:18.259 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:06:18.262 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:06:18.263 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:06:18.266 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 20:06:18.268 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 20:06:18.272 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:06:18.280 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .OrderBy(c => c.Name)'
2023-11-07 20:06:18.284 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 20:06:18.293 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CityDbModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
            3 -> 3
        SELECT c.Id, c.Description, c.Name, p.Id, p.CityId, p.Description, p.Name
        FROM Cities AS c
        LEFT JOIN PointsOfInterest AS p ON c.Id == p.CityId
        ORDER BY c.Name ASC, c.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
    CityInfoApi.DbContexts.CityInfoDbContext, 
    False, 
    False, 
    True
)'
2023-11-07 20:06:18.297 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:18.298 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:06:18.299 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:18.301 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:18.302 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "Cities" AS "c"
LEFT JOIN "PointsOfInterest" AS "p" ON "c"."Id" = "p"."CityId"
ORDER BY "c"."Name", "c"."Id"
2023-11-07 20:06:18.304 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "Cities" AS "c"
LEFT JOIN "PointsOfInterest" AS "p" ON "c"."Id" = "p"."CityId"
ORDER BY "c"."Name", "c"."Id"
2023-11-07 20:06:18.309 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:18.323 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:18.336 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:18.339 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:18.343 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:18.345 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:18.346 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:18.348 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:18.349 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:18.350 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:18.351 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:18.352 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:18.363 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:06:18.367 +02:00 [DBG] Attempting to select an output formatter based on Accept header '["application/xml"]'.
2023-11-07 20:06:18.369 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter' and content type 'application/xml' to write the response.
2023-11-07 20:06:18.370 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.CityDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 20:06:18.376 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi) in 109.4993ms
2023-11-07 20:06:18.379 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCities (CityInfoApi)'
2023-11-07 20:06:18.381 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:06:18.382 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:06:18.383 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities - - - 200 1587 application/xml;+charset=utf-8 140.3002ms
2023-11-07 20:06:36.456 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:06:36.457 +02:00 [DBG] POST requests are not supported
2023-11-07 20:06:36.458 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:06:36.460 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:06:36.461 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:06:36.463 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:06:36.467 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:06:36.469 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:06:36.471 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:06:36.473 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:06:36.475 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:06:36.477 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:06:36.478 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:36.480 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:36.481 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:36.483 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:06:36.485 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:36.486 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:36.487 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:36.489 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:36.490 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:06:36.492 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:06:36.494 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:06:36.495 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:06:36.501 +02:00 [DBG] Connection id "0HMUVNGM1CB5H", Request id "0HMUVNGM1CB5H:0000000B": started reading request body.
2023-11-07 20:06:36.503 +02:00 [DBG] Connection id "0HMUVNGM1CB5H", Request id "0HMUVNGM1CB5H:0000000B": done reading request body.
2023-11-07 20:06:36.584 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:06:36.585 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:06:36.587 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:06:36.594 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:06:36.601 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:06:36.604 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:06:36.608 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:06:36.611 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:36.612 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:06:36.614 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:36.615 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:36.617 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:06:36.620 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:06:36.622 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:36.623 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:36.624 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:36.626 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:36.631 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 152.998ms
2023-11-07 20:06:36.634 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:06:36.635 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at CityInfoApi.Services.CityInfoRepository.AddPointOfInterestAsync(Int32 cityId, PointOfInterestDbModel pointOfInterest) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Services\CityInfoRepository.cs:line 51
   at CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestRequestDto pointOfInterestRequestDto) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Controllers\PointsOfInterestController.cs:line 49
   at lambda_method141(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 20:06:36.672 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:06:36.674 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:06:36.675 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108 - 500 - text/plain;+charset=utf-8 218.7217ms
2023-11-07 20:06:43.379 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:06:43.381 +02:00 [DBG] POST requests are not supported
2023-11-07 20:06:43.382 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:06:43.384 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:06:43.386 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:06:43.388 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:06:43.389 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:06:43.392 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:06:43.394 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:06:43.395 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:06:43.399 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:06:43.400 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:06:43.402 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:43.404 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:06:43.405 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:43.406 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:06:43.408 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:43.409 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:43.411 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:06:43.412 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:06:43.413 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:06:43.414 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:06:43.416 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:06:43.417 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:06:43.420 +02:00 [DBG] Connection id "0HMUVNGM1CB5H", Request id "0HMUVNGM1CB5H:0000000C": started reading request body.
2023-11-07 20:06:43.421 +02:00 [DBG] Connection id "0HMUVNGM1CB5H", Request id "0HMUVNGM1CB5H:0000000C": done reading request body.
2023-11-07 20:06:43.423 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:06:43.424 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:06:43.426 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:06:43.427 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:06:43.428 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:06:43.430 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:06:43.431 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:06:43.432 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:43.433 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:43.435 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:06:43.438 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:06:43.440 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:06:43.441 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:06:43.442 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:06:43.443 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:06:43.445 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 42.969ms
2023-11-07 20:06:43.446 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:06:43.447 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at CityInfoApi.Services.CityInfoRepository.AddPointOfInterestAsync(Int32 cityId, PointOfInterestDbModel pointOfInterest) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Services\CityInfoRepository.cs:line 51
   at CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestRequestDto pointOfInterestRequestDto) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Controllers\PointsOfInterestController.cs:line 49
   at lambda_method141(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 20:06:43.455 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" completed keep alive response.
2023-11-07 20:06:43.456 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:06:43.457 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108 - 500 - text/plain;+charset=utf-8 78.5280ms
2023-11-07 20:07:37.594 +02:00 [INF] Application is shutting down...
2023-11-07 20:07:37.596 +02:00 [DBG] Hosting stopping
2023-11-07 20:07:37.605 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" disconnecting.
2023-11-07 20:07:37.610 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" stopped.
2023-11-07 20:07:37.612 +02:00 [DBG] Connection id "0HMUVNGM1CB5H" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:07:37.617 +02:00 [DBG] Hosting stopped
2023-11-07 20:07:43.724 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:07:43.806 +02:00 [DBG] Hosting starting
2023-11-07 20:07:43.865 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:07:43.902 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:07:43.904 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:07:43.905 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:07:43.906 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:07:43.908 +02:00 [INF] Hosting environment: Development
2023-11-07 20:07:43.909 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:07:43.910 +02:00 [DBG] Hosting started
2023-11-07 20:08:01.191 +02:00 [DBG] Connection id "0HMUVNHTEFKHN" received FIN.
2023-11-07 20:08:01.199 +02:00 [DBG] Connection id "0HMUVNHTEFKHN" accepted.
2023-11-07 20:08:01.202 +02:00 [DBG] Connection id "0HMUVNHTEFKHN" started.
2023-11-07 20:08:01.203 +02:00 [DBG] Connection id "0HMUVNHTEFKHO" accepted.
2023-11-07 20:08:01.206 +02:00 [DBG] Connection id "0HMUVNHTEFKHO" started.
2023-11-07 20:08:01.217 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:08:01.236 +02:00 [DBG] Connection id "0HMUVNHTEFKHN" stopped.
2023-11-07 20:08:01.241 +02:00 [DBG] Connection id "0HMUVNHTEFKHN" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:08:01.250 +02:00 [DBG] Connection 0HMUVNHTEFKHO established using the following protocol: "Tls12"
2023-11-07 20:08:01.282 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:08:01.285 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:08:01.306 +02:00 [DBG] POST requests are not supported
2023-11-07 20:08:01.334 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:08:01.342 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:08:01.344 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:08:01.347 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:08:01.380 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:08:01.383 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:08:01.384 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:08:01.385 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:08:01.389 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:08:01.391 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:08:01.392 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:08:01.512 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:08:01.666 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:08:01.671 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:08:01.675 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:08:01.677 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:08:01.679 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:08:01.680 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:08:01.682 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:08:01.685 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:08:01.687 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:08:01.690 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:08:01.691 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:08:01.697 +02:00 [DBG] Connection id "0HMUVNHTEFKHO", Request id "0HMUVNHTEFKHO:00000002": started reading request body.
2023-11-07 20:08:01.699 +02:00 [DBG] Connection id "0HMUVNHTEFKHO", Request id "0HMUVNHTEFKHO:00000002": done reading request body.
2023-11-07 20:08:01.818 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:08:01.820 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:08:01.822 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:08:01.830 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:08:02.697 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:08:02.777 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:08:02.834 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 20:08:03.110 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:08:03.164 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:08:03.213 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (43ms).
2023-11-07 20:08:03.226 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:08:03.248 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:08:03.267 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:08:03.296 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:08:03.325 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:08:03.358 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:08:03.378 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:08:03.385 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:08:03.393 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:08:03.399 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:08:03.403 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:08:03.409 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:08:03.428 +02:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'CityDbModel.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:08:03.457 +02:00 [DBG] 'CityInfoDbContext' generated a temporary value for the property 'Id.PointOfInterestDbModel'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:08:03.471 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:08:03.478 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:08:03.498 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:08:03.500 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:08:03.503 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:08:03.550 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:08:03.613 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:08:03.615 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:08:03.617 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:08:03.686 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:08:03.713 +02:00 [DBG] The foreign key property 'PointOfInterestDbModel.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:08:03.723 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:08:03.729 +02:00 [DBG] Committing transaction.
2023-11-07 20:08:03.801 +02:00 [DBG] Committed transaction.
2023-11-07 20:08:03.806 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:08:03.808 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:08:03.812 +02:00 [DBG] Disposing transaction.
2023-11-07 20:08:03.824 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:08:03.828 +02:00 [DBG] SaveChanges completed for 'CityInfoDbContext' with 1 entities written to the database.
2023-11-07 20:08:03.830 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:08:03.835 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:08:03.835 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:08:03.836 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:08:03.839 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:08:03.841 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'CityInfoApi.Models.PointOfInterestDbModel'.
2023-11-07 20:08:03.861 +02:00 [DBG] Found the endpoints ["CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-11-07 20:08:03.870 +02:00 [DBG] Failed to process the template api/cities/{cityId}/PointsOfInterest/{id} for CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi). A required route value is missing, or has a different value from the required default values. Supplied ambient values { "action": "CreatePointOfInterest", "cityId": "3", "controller": "PointsOfInterest" } and { "action": "GetPointOfInterest", "controller": "PointsOfInterest" } with default values { "action": "GetPointOfInterest", "controller": "PointsOfInterest" }
2023-11-07 20:08:03.874 +02:00 [DBG] Link generation failed for endpoints ["CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)"]
2023-11-07 20:08:03.881 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 2483.9172ms
2023-11-07 20:08:03.884 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:08:03.886 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.ObjectResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 20:08:03.902 +02:00 [DBG] Connection id "0HMUVNHTEFKHO" completed keep alive response.
2023-11-07 20:08:03.910 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:08:03.916 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108 - 500 - text/plain;+charset=utf-8 2637.0846ms
2023-11-07 20:09:09.495 +02:00 [INF] Application is shutting down...
2023-11-07 20:09:09.497 +02:00 [DBG] Hosting stopping
2023-11-07 20:09:09.509 +02:00 [DBG] Connection id "0HMUVNHTEFKHO" disconnecting.
2023-11-07 20:09:09.513 +02:00 [DBG] Connection id "0HMUVNHTEFKHO" stopped.
2023-11-07 20:09:09.514 +02:00 [DBG] Connection id "0HMUVNHTEFKHO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:09:09.519 +02:00 [DBG] Hosting stopped
2023-11-07 20:09:15.164 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:09:15.251 +02:00 [DBG] Hosting starting
2023-11-07 20:09:15.318 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:09:15.364 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:09:15.366 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:09:15.367 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:09:15.368 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:09:15.370 +02:00 [INF] Hosting environment: Development
2023-11-07 20:09:15.371 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:09:15.372 +02:00 [DBG] Hosting started
2023-11-07 20:10:05.225 +02:00 [DBG] Connection id "0HMUVNJ2DBLOU" received FIN.
2023-11-07 20:10:05.233 +02:00 [DBG] Connection id "0HMUVNJ2DBLOU" accepted.
2023-11-07 20:10:05.235 +02:00 [DBG] Connection id "0HMUVNJ2DBLOU" started.
2023-11-07 20:10:05.237 +02:00 [DBG] Connection id "0HMUVNJ2DBLOV" accepted.
2023-11-07 20:10:05.239 +02:00 [DBG] Connection id "0HMUVNJ2DBLOV" started.
2023-11-07 20:10:05.250 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:10:05.270 +02:00 [DBG] Connection id "0HMUVNJ2DBLOU" stopped.
2023-11-07 20:10:05.274 +02:00 [DBG] Connection id "0HMUVNJ2DBLOU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:10:05.284 +02:00 [DBG] Connection 0HMUVNJ2DBLOV established using the following protocol: "Tls12"
2023-11-07 20:10:07.018 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:10:07.021 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:10:07.044 +02:00 [DBG] POST requests are not supported
2023-11-07 20:10:07.072 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:10:07.081 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:10:07.084 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:10:07.086 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:10:07.120 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:10:07.124 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:10:07.126 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:10:07.127 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:10:07.129 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:10:07.131 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:10:07.133 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:10:07.256 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:10:07.411 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:10:07.416 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:10:07.419 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:10:07.423 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:10:07.425 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:10:07.426 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:10:07.428 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:10:07.431 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:10:07.433 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:10:07.436 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:10:07.437 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:10:07.444 +02:00 [DBG] Connection id "0HMUVNJ2DBLOV", Request id "0HMUVNJ2DBLOV:00000002": started reading request body.
2023-11-07 20:10:07.446 +02:00 [DBG] Connection id "0HMUVNJ2DBLOV", Request id "0HMUVNJ2DBLOV:00000002": done reading request body.
2023-11-07 20:10:07.566 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:10:07.568 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:10:07.569 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:10:07.577 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:10:08.459 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:10:08.541 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:10:08.601 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 20:10:08.874 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:10:08.927 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:10:08.979 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (46ms).
2023-11-07 20:10:08.994 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:10:09.016 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:10:09.036 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:10:09.067 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:10:09.097 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:10:09.133 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:10:09.154 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:10:09.157 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:10:09.164 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:10:09.173 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:10:09.180 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:10:09.185 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:10:09.190 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:10:09.212 +02:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'CityDbModel.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:10:09.242 +02:00 [DBG] 'CityInfoDbContext' generated a temporary value for the property 'Id.PointOfInterestDbModel'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:10:09.256 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:10:09.263 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:10:09.283 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:10:09.285 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:10:09.288 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:10:09.298 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:10:09.361 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:10:09.363 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:10:09.364 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:10:09.369 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:10:09.393 +02:00 [DBG] The foreign key property 'PointOfInterestDbModel.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:10:09.405 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:10:09.410 +02:00 [DBG] Committing transaction.
2023-11-07 20:10:09.516 +02:00 [DBG] Committed transaction.
2023-11-07 20:10:09.520 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:10:09.522 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:10:09.528 +02:00 [DBG] Disposing transaction.
2023-11-07 20:10:09.543 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:10:09.547 +02:00 [DBG] SaveChanges completed for 'CityInfoDbContext' with 1 entities written to the database.
2023-11-07 20:10:09.550 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:10:09.562 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:10:09.564 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:10:09.565 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:10:09.568 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:10:09.569 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'CityInfoApi.Models.PointOfInterestDbModel'.
2023-11-07 20:10:09.597 +02:00 [DBG] Found the endpoints ["CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-11-07 20:10:09.607 +02:00 [DBG] Failed to process the template api/cities/{cityId}/PointsOfInterest/{id} for CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi). A required route value is missing, or has a different value from the required default values. Supplied ambient values { "action": "CreatePointOfInterest", "cityId": "3", "controller": "PointsOfInterest" } and { "action": "GetPointOfInterest", "controller": "PointsOfInterest" } with default values { "action": "GetPointOfInterest", "controller": "PointsOfInterest" }
2023-11-07 20:10:09.611 +02:00 [DBG] Link generation failed for endpoints ["CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)"]
2023-11-07 20:10:09.618 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 2480.4721ms
2023-11-07 20:10:09.622 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:10:09.626 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.ObjectResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 20:10:09.645 +02:00 [DBG] Connection id "0HMUVNJ2DBLOV" completed keep alive response.
2023-11-07 20:10:09.651 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:10:09.657 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108 - 500 - text/plain;+charset=utf-8 2641.7200ms
2023-11-07 20:10:29.290 +02:00 [INF] Application is shutting down...
2023-11-07 20:10:29.292 +02:00 [DBG] Hosting stopping
2023-11-07 20:10:29.303 +02:00 [DBG] Connection id "0HMUVNJ2DBLOV" disconnecting.
2023-11-07 20:10:29.306 +02:00 [DBG] Connection id "0HMUVNJ2DBLOV" stopped.
2023-11-07 20:10:29.307 +02:00 [DBG] Connection id "0HMUVNJ2DBLOV" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:10:29.312 +02:00 [DBG] Hosting stopped
2023-11-07 20:10:36.638 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:10:36.719 +02:00 [DBG] Hosting starting
2023-11-07 20:10:36.776 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:10:36.811 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:10:36.813 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:10:36.815 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:10:36.816 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:10:36.818 +02:00 [INF] Hosting environment: Development
2023-11-07 20:10:36.818 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:10:36.819 +02:00 [DBG] Hosting started
2023-11-07 20:10:46.743 +02:00 [DBG] Connection id "0HMUVNJEP9RCP" received FIN.
2023-11-07 20:10:46.752 +02:00 [DBG] Connection id "0HMUVNJEP9RCP" accepted.
2023-11-07 20:10:46.755 +02:00 [DBG] Connection id "0HMUVNJEP9RCP" started.
2023-11-07 20:10:46.756 +02:00 [DBG] Connection id "0HMUVNJEP9RCQ" accepted.
2023-11-07 20:10:46.759 +02:00 [DBG] Connection id "0HMUVNJEP9RCQ" started.
2023-11-07 20:10:46.770 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:10:46.789 +02:00 [DBG] Connection id "0HMUVNJEP9RCP" stopped.
2023-11-07 20:10:46.791 +02:00 [DBG] Connection id "0HMUVNJEP9RCP" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:10:46.802 +02:00 [DBG] Connection 0HMUVNJEP9RCQ established using the following protocol: "Tls12"
2023-11-07 20:10:46.835 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:10:46.837 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:10:46.858 +02:00 [DBG] POST requests are not supported
2023-11-07 20:10:46.888 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:10:46.896 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:10:46.900 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:10:46.902 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:10:46.936 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:10:46.940 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:10:46.941 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:10:46.943 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:10:46.945 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:10:46.947 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:10:46.949 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:10:47.070 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:10:47.226 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:10:47.231 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:10:47.234 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:10:47.237 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:10:47.238 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:10:47.239 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:10:47.241 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:10:47.244 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:10:47.246 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:10:47.248 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:10:47.250 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:10:47.256 +02:00 [DBG] Connection id "0HMUVNJEP9RCQ", Request id "0HMUVNJEP9RCQ:00000002": started reading request body.
2023-11-07 20:10:47.258 +02:00 [DBG] Connection id "0HMUVNJEP9RCQ", Request id "0HMUVNJEP9RCQ:00000002": done reading request body.
2023-11-07 20:10:47.377 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:10:47.380 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:10:47.382 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:10:47.389 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:10:48.311 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:10:48.361 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:10:48.579 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:10:48.634 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:10:48.683 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2023-11-07 20:10:48.697 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:10:48.722 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:10:48.744 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:10:48.775 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:10:48.807 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:10:48.841 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:10:48.848 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:10:48.855 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:10:48.865 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 1911.7218ms
2023-11-07 20:10:48.870 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:10:48.871 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at CityInfoApi.Services.CityInfoRepository.AddPointOfInterestAsync(Int32 cityId, PointOfInterestDbModel pointOfInterest) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Services\CityInfoRepository.cs:line 51
   at CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestRequestDto pointOfInterestRequestDto) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Controllers\PointsOfInterestController.cs:line 49
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 20:10:48.896 +02:00 [DBG] Connection id "0HMUVNJEP9RCQ" completed keep alive response.
2023-11-07 20:10:48.904 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:10:48.907 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108 - 500 - text/plain;+charset=utf-8 2075.7211ms
2023-11-07 20:11:50.901 +02:00 [INF] Application is shutting down...
2023-11-07 20:11:50.902 +02:00 [DBG] Hosting stopping
2023-11-07 20:11:50.914 +02:00 [DBG] Connection id "0HMUVNJEP9RCQ" disconnecting.
2023-11-07 20:11:50.920 +02:00 [DBG] Connection id "0HMUVNJEP9RCQ" stopped.
2023-11-07 20:11:50.922 +02:00 [DBG] Connection id "0HMUVNJEP9RCQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:11:50.926 +02:00 [DBG] Hosting stopped
2023-11-07 20:11:56.800 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:11:56.884 +02:00 [DBG] Hosting starting
2023-11-07 20:11:56.942 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:11:56.977 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:11:56.979 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:11:56.980 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:11:56.982 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:11:56.983 +02:00 [INF] Hosting environment: Development
2023-11-07 20:11:56.984 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:11:56.985 +02:00 [DBG] Hosting started
2023-11-07 20:12:01.120 +02:00 [DBG] Connection id "0HMUVNK4UJVF5" received FIN.
2023-11-07 20:12:01.128 +02:00 [DBG] Connection id "0HMUVNK4UJVF5" accepted.
2023-11-07 20:12:01.131 +02:00 [DBG] Connection id "0HMUVNK4UJVF5" started.
2023-11-07 20:12:01.133 +02:00 [DBG] Connection id "0HMUVNK4UJVF6" accepted.
2023-11-07 20:12:01.135 +02:00 [DBG] Connection id "0HMUVNK4UJVF6" started.
2023-11-07 20:12:01.146 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:12:01.166 +02:00 [DBG] Connection id "0HMUVNK4UJVF5" stopped.
2023-11-07 20:12:01.169 +02:00 [DBG] Connection id "0HMUVNK4UJVF5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:12:01.180 +02:00 [DBG] Connection 0HMUVNK4UJVF6 established using the following protocol: "Tls12"
2023-11-07 20:12:01.211 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:12:01.214 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:12:01.235 +02:00 [DBG] POST requests are not supported
2023-11-07 20:12:01.263 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:12:01.271 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:12:01.274 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:12:01.276 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:12:01.309 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:12:01.313 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:12:01.314 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:12:01.316 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:12:01.320 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:12:01.322 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:12:01.323 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:12:01.443 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:12:01.597 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:12:01.602 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:12:01.606 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:12:01.608 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:12:01.609 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:12:01.610 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:12:01.612 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:12:01.615 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:12:01.617 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:12:01.620 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:12:01.621 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:12:01.627 +02:00 [DBG] Connection id "0HMUVNK4UJVF6", Request id "0HMUVNK4UJVF6:00000002": started reading request body.
2023-11-07 20:12:01.629 +02:00 [DBG] Connection id "0HMUVNK4UJVF6", Request id "0HMUVNK4UJVF6:00000002": done reading request body.
2023-11-07 20:12:01.750 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:12:01.752 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:12:01.754 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:12:01.762 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:12:02.674 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:12:02.727 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:12:02.945 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:12:02.999 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:12:03.048 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (44ms).
2023-11-07 20:12:03.061 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:12:03.084 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:12:03.105 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:12:03.135 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:12:03.168 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:12:03.199 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:12:03.207 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:12:03.214 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:12:03.224 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 1895.4958ms
2023-11-07 20:12:03.227 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:12:03.228 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at CityInfoApi.Services.CityInfoRepository.AddPointOfInterestAsync(Int32 cityId, PointOfInterestDbModel pointOfInterest) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Services\CityInfoRepository.cs:line 52
   at CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestRequestDto pointOfInterestRequestDto) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Controllers\PointsOfInterestController.cs:line 49
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 20:12:03.251 +02:00 [DBG] Connection id "0HMUVNK4UJVF6" completed keep alive response.
2023-11-07 20:12:03.258 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:12:03.263 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108 - 500 - text/plain;+charset=utf-8 2054.8152ms
2023-11-07 20:12:20.388 +02:00 [INF] Application is shutting down...
2023-11-07 20:12:20.390 +02:00 [DBG] Hosting stopping
2023-11-07 20:12:20.401 +02:00 [DBG] Connection id "0HMUVNK4UJVF6" disconnecting.
2023-11-07 20:12:20.405 +02:00 [DBG] Connection id "0HMUVNK4UJVF6" stopped.
2023-11-07 20:12:20.406 +02:00 [DBG] Connection id "0HMUVNK4UJVF6" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:12:20.412 +02:00 [DBG] Hosting stopped
2023-11-07 20:12:36.623 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:12:36.702 +02:00 [DBG] Hosting starting
2023-11-07 20:12:36.830 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:12:36.881 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:12:36.884 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:12:36.885 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:12:36.886 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:12:36.888 +02:00 [INF] Hosting environment: Development
2023-11-07 20:12:36.889 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:12:36.891 +02:00 [DBG] Hosting started
2023-11-07 20:12:46.827 +02:00 [DBG] Connection id "0HMUVNKIIGQJJ" received FIN.
2023-11-07 20:12:46.838 +02:00 [DBG] Connection id "0HMUVNKIIGQJJ" accepted.
2023-11-07 20:12:46.844 +02:00 [DBG] Connection id "0HMUVNKIIGQJJ" started.
2023-11-07 20:12:46.845 +02:00 [DBG] Connection id "0HMUVNKIIGQJK" accepted.
2023-11-07 20:12:46.848 +02:00 [DBG] Connection id "0HMUVNKIIGQJK" started.
2023-11-07 20:12:46.869 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:12:46.910 +02:00 [DBG] Connection id "0HMUVNKIIGQJJ" stopped.
2023-11-07 20:12:46.913 +02:00 [DBG] Connection id "0HMUVNKIIGQJJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:12:46.919 +02:00 [DBG] Connection 0HMUVNKIIGQJK established using the following protocol: "Tls12"
2023-11-07 20:12:46.944 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:12:46.947 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:12:46.962 +02:00 [DBG] POST requests are not supported
2023-11-07 20:12:46.987 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:12:46.993 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:12:46.995 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:12:46.998 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:12:47.020 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:12:47.024 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:12:47.025 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:12:47.027 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:12:47.029 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:12:47.031 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:12:47.033 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:12:47.158 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:12:47.294 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:12:47.299 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:12:47.303 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:12:47.306 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:12:47.308 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:12:47.309 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:12:47.311 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:12:47.314 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:12:47.317 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:12:47.320 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:12:47.322 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:12:47.327 +02:00 [DBG] Connection id "0HMUVNKIIGQJK", Request id "0HMUVNKIIGQJK:00000002": started reading request body.
2023-11-07 20:12:47.329 +02:00 [DBG] Connection id "0HMUVNKIIGQJK", Request id "0HMUVNKIIGQJK:00000002": done reading request body.
2023-11-07 20:12:47.442 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:12:47.445 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:12:47.449 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:12:47.460 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:12:48.155 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:12:48.193 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:12:48.345 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:12:48.382 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:12:48.445 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (61ms).
2023-11-07 20:12:48.455 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:12:48.471 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:12:48.488 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:12:48.509 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:12:48.529 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:12:48.552 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:12:48.558 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:12:48.565 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:12:48.800 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 1761.1552ms
2023-11-07 20:12:48.804 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:12:48.806 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at CityInfoApi.Services.CityInfoRepository.AddPointOfInterestAsync(Int32 cityId, PointOfInterestDbModel pointOfInterest) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Services\CityInfoRepository.cs:line 51
   at CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestRequestDto pointOfInterestRequestDto) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Controllers\PointsOfInterestController.cs:line 49
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 20:12:48.840 +02:00 [DBG] Connection id "0HMUVNKIIGQJK" completed keep alive response.
2023-11-07 20:12:48.847 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:12:48.854 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108 - 500 - text/plain;+charset=utf-8 1911.8128ms
2023-11-07 20:13:12.671 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:13:12.672 +02:00 [DBG] POST requests are not supported
2023-11-07 20:13:12.674 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:13:12.675 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:13:12.677 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:13:12.678 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:13:12.680 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:13:12.682 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:13:12.684 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:13:12.685 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:13:12.688 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:13:12.690 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:13:12.691 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:13:12.693 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:13:12.700 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:13:12.701 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:13:12.703 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:13:12.705 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:13:12.706 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:13:12.708 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:13:12.709 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:13:12.711 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:13:12.712 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:13:12.714 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:13:12.715 +02:00 [DBG] Connection id "0HMUVNKIIGQJK", Request id "0HMUVNKIIGQJK:00000003": started reading request body.
2023-11-07 20:13:12.717 +02:00 [DBG] Connection id "0HMUVNKIIGQJK", Request id "0HMUVNKIIGQJK:00000003": done reading request body.
2023-11-07 20:13:12.718 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:13:12.720 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:13:12.721 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:13:12.723 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:13:12.733 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:13:12.747 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:13:12.749 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:13:12.750 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:13:12.752 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:13:12.754 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:13:12.756 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
LIMIT 1
2023-11-07 20:13:12.759 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:13:12.760 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:13:12.761 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:13:12.762 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:15:01.084 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:15:01.179 +02:00 [DBG] Hosting starting
2023-11-07 20:15:01.340 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:15:01.425 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:15:01.427 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:15:01.429 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:15:01.431 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:15:01.434 +02:00 [INF] Hosting environment: Development
2023-11-07 20:15:01.435 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:15:01.437 +02:00 [DBG] Hosting started
2023-11-07 20:15:03.954 +02:00 [DBG] Connection id "0HMUVNLRE8F78" received FIN.
2023-11-07 20:15:03.962 +02:00 [DBG] Connection id "0HMUVNLRE8F78" accepted.
2023-11-07 20:15:03.992 +02:00 [DBG] Connection id "0HMUVNLRE8F78" started.
2023-11-07 20:15:03.999 +02:00 [DBG] Connection id "0HMUVNLRE8F79" accepted.
2023-11-07 20:15:04.001 +02:00 [DBG] Connection id "0HMUVNLRE8F79" started.
2023-11-07 20:15:04.015 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:15:04.057 +02:00 [DBG] Connection id "0HMUVNLRE8F78" stopped.
2023-11-07 20:15:04.059 +02:00 [DBG] Connection id "0HMUVNLRE8F78" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:15:04.064 +02:00 [DBG] Connection 0HMUVNLRE8F79 established using the following protocol: "Tls12"
2023-11-07 20:15:04.089 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:15:04.092 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:15:04.108 +02:00 [DBG] POST requests are not supported
2023-11-07 20:15:04.130 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:15:04.137 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:15:04.140 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:15:04.142 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:15:04.163 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:15:04.167 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:15:04.169 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:15:04.172 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:15:04.174 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:15:04.176 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:15:04.178 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:15:04.295 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:15:04.409 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:15:04.414 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:15:04.418 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:15:04.420 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:15:04.422 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:15:04.423 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:15:04.425 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:15:04.428 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:15:04.430 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:15:04.432 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:15:04.434 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:15:04.439 +02:00 [DBG] Connection id "0HMUVNLRE8F79", Request id "0HMUVNLRE8F79:00000002": started reading request body.
2023-11-07 20:15:04.442 +02:00 [DBG] Connection id "0HMUVNLRE8F79", Request id "0HMUVNLRE8F79:00000002": done reading request body.
2023-11-07 20:15:04.542 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:15:04.544 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:15:04.545 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:15:04.551 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:15:05.056 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:15:05.128 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:15:05.168 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 20:15:05.355 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:15:05.395 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:15:05.459 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (62ms).
2023-11-07 20:15:05.469 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:15:05.484 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:15:05.497 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:15:05.520 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:15:05.538 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:15:05.557 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:15:05.570 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:15:05.572 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:15:05.574 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:15:05.579 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:15:05.585 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:15:05.590 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:15:33.830 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:15:33.836 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:15:33.850 +02:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'CityDbModel.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:15:33.868 +02:00 [DBG] 'CityInfoDbContext' generated a temporary value for the property 'Id.PointOfInterestDbModel'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:15:33.879 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:15:33.884 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:15:33.894 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:15:33.897 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:15:33.900 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:15:33.905 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:15:33.940 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:15:33.943 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-07 20:15:33.945 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:15:33.948 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:15:33.963 +02:00 [DBG] The foreign key property 'PointOfInterestDbModel.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:15:33.968 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:15:33.972 +02:00 [DBG] Committing transaction.
2023-11-07 20:15:34.409 +02:00 [DBG] Committed transaction.
2023-11-07 20:15:34.413 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:15:34.414 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:15:34.417 +02:00 [DBG] Disposing transaction.
2023-11-07 20:15:34.424 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:15:34.428 +02:00 [DBG] SaveChanges completed for 'CityInfoDbContext' with 1 entities written to the database.
2023-11-07 20:18:25.456 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:18:25.536 +02:00 [DBG] Hosting starting
2023-11-07 20:18:25.594 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:18:25.630 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:18:25.632 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:18:25.634 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:18:25.636 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:18:25.638 +02:00 [INF] Hosting environment: Development
2023-11-07 20:18:25.639 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:18:25.640 +02:00 [DBG] Hosting started
2023-11-07 20:18:25.868 +02:00 [DBG] Connection id "0HMUVNNNJRRVB" received FIN.
2023-11-07 20:18:25.877 +02:00 [DBG] Connection id "0HMUVNNNJRRVB" accepted.
2023-11-07 20:18:25.881 +02:00 [DBG] Connection id "0HMUVNNNJRRVB" started.
2023-11-07 20:18:25.882 +02:00 [DBG] Connection id "0HMUVNNNJRRVC" accepted.
2023-11-07 20:18:25.884 +02:00 [DBG] Connection id "0HMUVNNNJRRVC" started.
2023-11-07 20:18:25.895 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:18:25.915 +02:00 [DBG] Connection id "0HMUVNNNJRRVB" stopped.
2023-11-07 20:18:25.917 +02:00 [DBG] Connection id "0HMUVNNNJRRVB" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:18:25.929 +02:00 [DBG] Connection 0HMUVNNNJRRVC established using the following protocol: "Tls12"
2023-11-07 20:18:25.960 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:18:25.963 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:18:25.985 +02:00 [DBG] POST requests are not supported
2023-11-07 20:18:26.014 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:18:26.023 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:18:26.026 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:18:26.029 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:18:26.063 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:18:26.066 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:18:26.068 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:18:26.070 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:18:26.072 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:18:26.074 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:18:26.076 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:18:26.203 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:18:26.361 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:18:26.365 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:18:26.368 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:18:26.372 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:18:26.373 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:18:26.374 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:18:26.377 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:18:26.380 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:18:26.382 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:18:26.384 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:18:26.386 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:18:26.392 +02:00 [DBG] Connection id "0HMUVNNNJRRVC", Request id "0HMUVNNNJRRVC:00000002": started reading request body.
2023-11-07 20:18:26.394 +02:00 [DBG] Connection id "0HMUVNNNJRRVC", Request id "0HMUVNNNJRRVC:00000002": done reading request body.
2023-11-07 20:18:26.522 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:18:26.524 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:18:26.525 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:18:26.531 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:18:27.411 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:18:27.493 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:18:27.551 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 20:18:27.823 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:18:27.879 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:18:27.929 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2023-11-07 20:18:27.943 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:18:27.966 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:18:27.988 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:18:28.025 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:18:28.055 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:18:28.090 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:18:28.109 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:18:28.112 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:18:28.113 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:18:28.115 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:18:28.121 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:18:28.129 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:18:28.136 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:18:28.142 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:18:28.148 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:18:28.169 +02:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'CityDbModel.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:18:28.199 +02:00 [DBG] 'CityInfoDbContext' generated a temporary value for the property 'Id.PointOfInterestDbModel'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:18:28.213 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:18:28.220 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:18:28.239 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:18:28.242 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:18:28.245 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:18:28.251 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:18:28.312 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:18:28.315 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-11-07 20:18:28.318 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:18:28.323 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:18:28.347 +02:00 [DBG] The foreign key property 'PointOfInterestDbModel.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:18:28.357 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:18:28.362 +02:00 [DBG] Committing transaction.
2023-11-07 20:18:28.415 +02:00 [DBG] Committed transaction.
2023-11-07 20:18:28.422 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:18:28.424 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:18:28.431 +02:00 [DBG] Disposing transaction.
2023-11-07 20:18:28.453 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:18:28.460 +02:00 [DBG] SaveChanges completed for 'CityInfoDbContext' with 1 entities written to the database.
2023-11-07 20:18:28.467 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:18:28.475 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:18:28.477 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:18:28.478 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:18:28.480 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:18:28.483 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'CityInfoApi.Models.PointOfInterestDbModel'.
2023-11-07 20:18:28.514 +02:00 [DBG] Found the endpoints ["CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-11-07 20:18:28.532 +02:00 [DBG] Successfully processed template api/cities/{cityId}/PointsOfInterest/{id} for CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi) resulting in /api/cities/3/PointsOfInterest/10 and 
2023-11-07 20:18:28.534 +02:00 [DBG] Link generation succeeded for endpoints ["CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)"] with result /api/cities/3/PointsOfInterest/10
2023-11-07 20:18:28.614 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 2532.5128ms
2023-11-07 20:18:28.617 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:18:28.620 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'city' with type 'CityInfoApi.Models.CityDbModel'. Path 'city.pointsOfInterest[0]'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 20:18:28.648 +02:00 [DBG] Connection id "0HMUVNNNJRRVC" completed keep alive response.
2023-11-07 20:18:28.654 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:18:28.659 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108 - 500 - text/plain;+charset=utf-8 2701.3187ms
2023-11-07 20:19:28.182 +02:00 [INF] Application is shutting down...
2023-11-07 20:19:28.184 +02:00 [DBG] Hosting stopping
2023-11-07 20:19:28.196 +02:00 [DBG] Connection id "0HMUVNNNJRRVC" disconnecting.
2023-11-07 20:19:28.200 +02:00 [DBG] Connection id "0HMUVNNNJRRVC" stopped.
2023-11-07 20:19:28.201 +02:00 [DBG] Connection id "0HMUVNNNJRRVC" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:19:28.207 +02:00 [DBG] Hosting stopped
2023-11-07 20:19:35.943 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:19:36.022 +02:00 [DBG] Hosting starting
2023-11-07 20:19:36.079 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:19:36.114 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:19:36.117 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:19:36.118 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:19:36.120 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:19:36.121 +02:00 [INF] Hosting environment: Development
2023-11-07 20:19:36.122 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:19:36.123 +02:00 [DBG] Hosting started
2023-11-07 20:19:46.278 +02:00 [DBG] Connection id "0HMUVNOFIMUEU" received FIN.
2023-11-07 20:19:46.287 +02:00 [DBG] Connection id "0HMUVNOFIMUEU" accepted.
2023-11-07 20:19:46.290 +02:00 [DBG] Connection id "0HMUVNOFIMUEU" started.
2023-11-07 20:19:46.291 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" accepted.
2023-11-07 20:19:46.293 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" started.
2023-11-07 20:19:46.304 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:19:46.325 +02:00 [DBG] Connection id "0HMUVNOFIMUEU" stopped.
2023-11-07 20:19:46.328 +02:00 [DBG] Connection id "0HMUVNOFIMUEU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:19:46.338 +02:00 [DBG] Connection 0HMUVNOFIMUEV established using the following protocol: "Tls12"
2023-11-07 20:19:46.378 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:19:46.381 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:19:46.408 +02:00 [DBG] POST requests are not supported
2023-11-07 20:19:46.443 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:19:46.451 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:19:46.454 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:19:46.457 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:19:46.499 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:19:46.503 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:19:46.504 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:19:46.506 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:19:46.508 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:19:46.510 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:19:46.511 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:19:46.647 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:19:46.808 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:19:46.813 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:19:46.817 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:19:46.820 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:19:46.821 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:19:46.822 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:19:46.825 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:19:46.829 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:19:46.831 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:19:46.834 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:19:46.835 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:19:46.842 +02:00 [DBG] Connection id "0HMUVNOFIMUEV", Request id "0HMUVNOFIMUEV:00000002": started reading request body.
2023-11-07 20:19:46.844 +02:00 [DBG] Connection id "0HMUVNOFIMUEV", Request id "0HMUVNOFIMUEV:00000002": done reading request body.
2023-11-07 20:19:46.981 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:19:46.983 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:19:46.985 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:19:46.991 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:19:47.972 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:19:48.063 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:19:48.118 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 20:19:48.392 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:19:48.454 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:19:48.505 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2023-11-07 20:19:48.518 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:19:48.540 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:19:48.560 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:19:48.589 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:19:48.620 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:48.656 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:48.677 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:48.680 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:48.681 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:48.683 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:48.684 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:48.691 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:19:48.699 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:19:48.706 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:19:48.712 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:19:48.718 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:19:48.737 +02:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'CityDbModel.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:48.766 +02:00 [DBG] 'CityInfoDbContext' generated a temporary value for the property 'Id.PointOfInterestDbModel'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:48.782 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:48.789 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:19:48.812 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:19:48.815 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:19:48.818 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:19:48.825 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:19:48.887 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:19:48.889 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:19:48.891 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:19:48.896 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:19:48.919 +02:00 [DBG] The foreign key property 'PointOfInterestDbModel.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:19:48.929 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:19:48.934 +02:00 [DBG] Committing transaction.
2023-11-07 20:19:49.022 +02:00 [DBG] Committed transaction.
2023-11-07 20:19:49.026 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:19:49.028 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:19:49.033 +02:00 [DBG] Disposing transaction.
2023-11-07 20:19:49.045 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:49.049 +02:00 [DBG] SaveChanges completed for 'CityInfoDbContext' with 1 entities written to the database.
2023-11-07 20:19:49.055 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:19:49.061 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:19:49.063 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:19:49.064 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:19:49.066 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:19:49.068 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'CityInfoApi.DTOs.PointOfInterestDto'.
2023-11-07 20:19:49.090 +02:00 [DBG] Found the endpoints ["CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-11-07 20:19:49.104 +02:00 [DBG] Successfully processed template api/cities/{cityId}/PointsOfInterest/{id} for CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi) resulting in /api/cities/3/PointsOfInterest/11 and 
2023-11-07 20:19:49.107 +02:00 [DBG] Link generation succeeded for endpoints ["CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)"] with result /api/cities/3/PointsOfInterest/11
2023-11-07 20:19:49.167 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 2651.3196ms
2023-11-07 20:19:49.170 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:19:49.171 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" completed keep alive response.
2023-11-07 20:19:49.176 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:19:49.181 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108 - 201 103 application/json;+charset=utf-8 2806.9163ms
2023-11-07 20:19:51.837 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108
2023-11-07 20:19:51.840 +02:00 [DBG] POST requests are not supported
2023-11-07 20:19:51.843 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:19:51.844 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:19:51.846 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:19:51.847 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:19:51.848 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:19:51.850 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:19:51.852 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:19:51.853 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:19:51.855 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:19:51.856 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:19:51.859 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:19:51.861 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:19:51.862 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:19:51.864 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:19:51.866 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:19:51.867 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:19:51.868 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:19:51.869 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:19:51.870 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:19:51.871 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:19:51.873 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:19:51.874 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:19:51.875 +02:00 [DBG] Connection id "0HMUVNOFIMUEV", Request id "0HMUVNOFIMUEV:00000003": started reading request body.
2023-11-07 20:19:51.877 +02:00 [DBG] Connection id "0HMUVNOFIMUEV", Request id "0HMUVNOFIMUEV:00000003": done reading request body.
2023-11-07 20:19:51.878 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:19:51.879 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:19:51.881 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:19:51.882 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:19:51.885 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:19:51.890 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:19:51.891 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:19:51.893 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:19:51.895 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:19:51.896 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:19:51.898 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:19:51.901 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.902 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.903 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.904 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.906 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.907 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.909 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.910 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.912 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:19:51.913 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:19:51.915 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:19:51.916 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:19:51.917 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:19:51.918 +02:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'CityDbModel.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.920 +02:00 [DBG] 'CityInfoDbContext' generated a temporary value for the property 'Id.PointOfInterestDbModel'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.921 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.922 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:19:51.924 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:19:51.926 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:19:51.927 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:19:51.928 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:19:51.929 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:19:51.930 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:19:51.931 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:19:51.933 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 62), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointsOfInterest" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointsOfInterest"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-07 20:19:51.936 +02:00 [DBG] The foreign key property 'PointOfInterestDbModel.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:19:51.938 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:19:51.938 +02:00 [DBG] Committing transaction.
2023-11-07 20:19:51.987 +02:00 [DBG] Committed transaction.
2023-11-07 20:19:51.989 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:19:51.991 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:19:51.993 +02:00 [DBG] Disposing transaction.
2023-11-07 20:19:51.994 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:19:51.995 +02:00 [DBG] SaveChanges completed for 'CityInfoDbContext' with 1 entities written to the database.
2023-11-07 20:19:51.997 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:19:51.999 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:19:52.000 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:19:52.000 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:19:52.001 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:19:52.003 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'CityInfoApi.DTOs.PointOfInterestDto'.
2023-11-07 20:19:52.004 +02:00 [DBG] Found the endpoints ["CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-11-07 20:19:52.006 +02:00 [DBG] Successfully processed template api/cities/{cityId}/PointsOfInterest/{id} for CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi) resulting in /api/cities/3/PointsOfInterest/12 and 
2023-11-07 20:19:52.008 +02:00 [DBG] Link generation succeeded for endpoints ["CityInfoApi.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfoApi)"] with result /api/cities/3/PointsOfInterest/12
2023-11-07 20:19:52.011 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 152.1965ms
2023-11-07 20:19:52.012 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:19:52.013 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" completed keep alive response.
2023-11-07 20:19:52.014 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:19:52.015 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 108 - 201 103 application/json;+charset=utf-8 178.2270ms
2023-11-07 20:20:01.006 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/3?includepointsofinterest=true - -
2023-11-07 20:20:01.019 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:20:01.022 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3'
2023-11-07 20:20:01.024 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)' with route pattern 'api/Cities/{id}' is valid for the request path '/api/cities/3'
2023-11-07 20:20:01.026 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:20:01.028 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:20:01.035 +02:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.CityDto]] GetCity(Int32, Boolean) on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 20:20:01.037 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:20:01.039 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:20:01.040 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:20:01.044 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:20:01.047 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:20:01.048 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 20:20:01.052 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 20:20:01.057 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:20:01.059 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:20:01.062 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:20:01.063 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:20:01.064 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:20:01.065 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:20:01.066 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 20:20:01.068 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-11-07 20:20:01.070 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:20:01.071 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:20:01.073 +02:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 20:20:01.074 +02:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:20:01.127 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:20:01.131 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:20:01.132 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:20:01.133 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:20:01.134 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:20:01.136 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:20:01.138 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:20:01.141 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:01.142 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:01.145 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:01.146 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:01.147 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:01.149 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:01.150 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:01.151 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:01.153 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:01.154 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:20:01.155 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:20:01.156 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:20:01.162 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:20:01.166 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:20:01.167 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:20:01.168 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:20:01.169 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:20:01.170 +02:00 [INF] Executing OkObjectResult, writing value of type 'CityInfoApi.DTOs.CityDto'.
2023-11-07 20:20:01.184 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi) in 135.4161ms
2023-11-07 20:20:01.186 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:20:01.187 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" completed keep alive response.
2023-11-07 20:20:01.188 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:20:01.189 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/3?includepointsofinterest=true - - - 200 947 application/json;+charset=utf-8 183.3704ms
2023-11-07 20:20:39.144 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 0
2023-11-07 20:20:39.146 +02:00 [DBG] POST requests are not supported
2023-11-07 20:20:39.147 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:20:39.148 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:20:39.150 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:20:39.151 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:20:39.152 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:20:39.154 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:20:39.156 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:20:39.157 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:20:39.159 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:20:39.160 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:20:39.162 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:20:39.163 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:20:39.165 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:20:39.166 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:20:39.168 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:20:39.169 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:20:39.171 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:20:39.172 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:20:39.173 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:20:39.175 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:20:39.176 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:20:39.178 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:20:39.180 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:20:39.181 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:20:39.182 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:20:39.185 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:20:39.186 +02:00 [DBG] The request has model state errors, returning an error response.
2023-11-07 20:20:39.188 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-11-07 20:20:39.189 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:20:39.192 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:20:39.194 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-07 20:20:39.196 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 20:20:39.197 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-11-07 20:20:39.221 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 59.2211ms
2023-11-07 20:20:39.223 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:20:39.225 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" completed keep alive response.
2023-11-07 20:20:39.227 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 0 - 400 328 application/problem+json;+charset=utf-8 83.2156ms
2023-11-07 20:20:48.748 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 974
2023-11-07 20:20:48.750 +02:00 [DBG] POST requests are not supported
2023-11-07 20:20:48.751 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:20:48.752 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/3/pointsofinterest'
2023-11-07 20:20:48.754 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:20:48.755 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:20:48.757 +02:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:20:48.759 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:20:48.760 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:20:48.761 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:20:48.763 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:20:48.765 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:20:48.766 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:20:48.768 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:20:48.769 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:20:48.770 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:20:48.771 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:20:48.773 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:20:48.774 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:20:48.776 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:20:48.777 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:20:48.778 +02:00 [DBG] Attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:20:48.779 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:20:48.780 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:20:48.781 +02:00 [DBG] Connection id "0HMUVNOFIMUEV", Request id "0HMUVNOFIMUEV:00000006": started reading request body.
2023-11-07 20:20:48.783 +02:00 [DBG] Connection id "0HMUVNOFIMUEV", Request id "0HMUVNOFIMUEV:00000006": done reading request body.
2023-11-07 20:20:48.787 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:20:48.788 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:20:48.790 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:20:48.792 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestRequestDto' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:20:48.793 +02:00 [DBG] The request has model state errors, returning an error response.
2023-11-07 20:20:48.794 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-11-07 20:20:48.795 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:20:48.798 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:20:48.799 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-07 20:20:48.801 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 20:20:48.802 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-11-07 20:20:48.803 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi) in 37.0986ms
2023-11-07 20:20:48.804 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfoApi)'
2023-11-07 20:20:48.806 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" completed keep alive response.
2023-11-07 20:20:48.807 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7105/api/cities/3/pointsofinterest application/json 974 - 400 333 application/problem+json;+charset=utf-8 59.7361ms
2023-11-07 20:20:54.530 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 122
2023-11-07 20:20:54.531 +02:00 [DBG] PUT requests are not supported
2023-11-07 20:20:54.532 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:20:54.534 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:20:54.535 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:20:54.536 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:20:54.543 +02:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] UpdatePointOfInterest(Int32, Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:20:54.546 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:20:54.548 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:20:54.550 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:20:54.553 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:20:54.554 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:20:54.556 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:20:54.558 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:20:54.559 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:20:54.562 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:20:54.563 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:20:54.565 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:20:54.566 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:20:54.568 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:20:54.569 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:20:54.570 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:20:54.572 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:20:54.574 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:20:54.577 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:20:54.578 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:20:54.580 +02:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:20:54.581 +02:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:20:54.583 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:20:54.584 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:20:54.585 +02:00 [DBG] Connection id "0HMUVNOFIMUEV", Request id "0HMUVNOFIMUEV:00000007": started reading request body.
2023-11-07 20:20:54.587 +02:00 [DBG] Connection id "0HMUVNOFIMUEV", Request id "0HMUVNOFIMUEV:00000007": done reading request body.
2023-11-07 20:20:54.588 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:20:54.590 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:20:54.592 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:20:54.594 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:20:54.600 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:20:54.603 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Any(c => c.Id == __cityId_0)'
2023-11-07 20:20:54.611 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:20:54.620 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:20:54.622 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-07 20:20:54.624 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:20:54.625 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:20:54.627 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:20:54.629 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:20:54.632 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:20:54.632 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:20:54.634 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:20:54.636 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .FirstOrDefault(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)'
2023-11-07 20:20:54.640 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterestDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterestDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) Required MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:20:54.645 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:20:54.646 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:20:54.647 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:20:54.648 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:20:54.650 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:20:54.652 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:20:54.655 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:54.656 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:20:54.657 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:20:54.659 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:20:54.661 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:20:54.662 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:20:54.664 +02:00 [DBG] The unchanged property 'PointOfInterestDbModel.Description' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:20:54.666 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:54.668 +02:00 [DBG] The unchanged property 'PointOfInterestDbModel.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:20:54.669 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:20:54.670 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:20:54.672 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:20:54.673 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:20:54.674 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:20:54.679 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:20:54.681 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-07 20:20:54.682 +02:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 59), @p1='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-11-07 20:20:54.732 +02:00 [INF] Executed DbCommand (50ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 59), @p1='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-11-07 20:20:54.737 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:20:54.738 +02:00 [DBG] Committing transaction.
2023-11-07 20:20:54.756 +02:00 [DBG] Committed transaction.
2023-11-07 20:20:54.759 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:20:54.760 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:20:54.761 +02:00 [DBG] Disposing transaction.
2023-11-07 20:20:54.762 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:20:54.764 +02:00 [DBG] SaveChanges completed for 'CityInfoDbContext' with 1 entities written to the database.
2023-11-07 20:20:54.770 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-11-07 20:20:54.772 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi) in 215.7386ms
2023-11-07 20:20:54.773 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:20:54.775 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" completed keep alive response.
2023-11-07 20:20:54.777 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:20:54.779 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 122 - 204 - - 248.1469ms
2023-11-07 20:21:09.565 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1?includepointsofinterest=true - -
2023-11-07 20:21:09.566 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:21:09.568 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-11-07 20:21:09.569 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)' with route pattern 'api/Cities/{id}' is valid for the request path '/api/cities/1'
2023-11-07 20:21:09.571 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:21:09.572 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:21:09.573 +02:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.CityDto]] GetCity(Int32, Boolean) on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 20:21:09.575 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:21:09.576 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:21:09.579 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:21:09.583 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:21:09.584 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:21:09.585 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 20:21:09.587 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 20:21:09.589 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:21:09.590 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:21:09.591 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:21:09.592 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:21:09.594 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:21:09.595 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:21:09.597 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 20:21:09.598 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-11-07 20:21:09.600 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:21:09.601 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:21:09.602 +02:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 20:21:09.603 +02:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:21:09.605 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:21:09.606 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:21:09.607 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:21:09.609 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:21:09.610 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:21:09.611 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:21:09.614 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:21:09.617 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:21:09.618 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:21:09.619 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:21:09.620 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:21:09.621 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:21:09.622 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:21:09.624 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:21:09.627 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:21:09.627 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:21:09.629 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:21:09.630 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:21:09.631 +02:00 [INF] Executing OkObjectResult, writing value of type 'CityInfoApi.DTOs.CityDto'.
2023-11-07 20:21:09.633 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi) in 47.1459ms
2023-11-07 20:21:09.634 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:21:09.635 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" completed keep alive response.
2023-11-07 20:21:09.636 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:21:09.637 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1?includepointsofinterest=true - - - 200 351 application/json;+charset=utf-8 72.2846ms
2023-11-07 20:21:31.402 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 46
2023-11-07 20:21:31.404 +02:00 [DBG] PUT requests are not supported
2023-11-07 20:21:31.405 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:21:31.406 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:21:31.407 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:21:31.408 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:21:31.409 +02:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] UpdatePointOfInterest(Int32, Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:21:31.411 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:21:31.413 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:21:31.415 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:21:31.417 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:21:31.419 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:21:31.421 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:21:31.422 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:21:31.423 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:21:31.424 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:21:31.426 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:21:31.427 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:21:31.428 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:21:31.430 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:21:31.431 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:21:31.432 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:21:31.434 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:21:31.436 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:21:31.438 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:21:31.440 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:21:31.441 +02:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:21:31.442 +02:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:21:31.444 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:21:31.445 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:21:31.446 +02:00 [DBG] Connection id "0HMUVNOFIMUEV", Request id "0HMUVNOFIMUEV:00000009": started reading request body.
2023-11-07 20:21:31.447 +02:00 [DBG] Connection id "0HMUVNOFIMUEV", Request id "0HMUVNOFIMUEV:00000009": done reading request body.
2023-11-07 20:21:31.448 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:21:31.449 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:21:31.451 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:21:31.453 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:21:31.454 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:21:31.457 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:21:31.458 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:21:31.460 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:21:31.461 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:21:31.463 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:21:31.465 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:21:31.467 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:21:31.469 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:21:31.472 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:21:31.473 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:21:31.475 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:21:31.476 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:21:31.477 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:21:31.479 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:21:31.481 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:21:31.485 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:21:31.487 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:21:31.488 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:21:31.489 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:21:31.490 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:21:31.491 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:21:31.492 +02:00 [DBG] The unchanged property 'PointOfInterestDbModel.Description' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:21:31.493 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:21:31.495 +02:00 [DBG] The unchanged property 'PointOfInterestDbModel.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:21:31.497 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:21:31.497 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:21:31.499 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:21:31.500 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:21:31.502 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:21:31.503 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:21:31.505 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:21:31.506 +02:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?', @p1='?' (Size = 28)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-11-07 20:21:31.797 +02:00 [ERR] Failed executing DbCommand (292ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?', @p1='?' (Size = 28)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-11-07 20:21:31.827 +02:00 [DBG] Disposing transaction.
2023-11-07 20:21:31.829 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:21:31.830 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:21:31.836 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfoApi.DbContexts.CityInfoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'NOT NULL constraint failed: PointsOfInterest.Description'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'NOT NULL constraint failed: PointsOfInterest.Description'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-11-07 20:21:31.847 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi) in 426.8164ms
2023-11-07 20:21:31.849 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:21:31.852 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'NOT NULL constraint failed: PointsOfInterest.Description'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfoApi.Services.CityInfoRepository.SaveChangesAsync() in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Services\CityInfoRepository.cs:line 58
   at CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest(Int32 cityId, Int32 id, PointOfInterestRequestDto pointOfInterest) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Controllers\PointsOfInterestController.cs:line 70
   at lambda_method164(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 20:21:31.877 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" completed keep alive response.
2023-11-07 20:21:31.879 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:21:31.880 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 46 - 500 - text/plain;+charset=utf-8 478.1002ms
2023-11-07 20:22:50.387 +02:00 [INF] Application is shutting down...
2023-11-07 20:22:50.388 +02:00 [DBG] Hosting stopping
2023-11-07 20:22:50.397 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" disconnecting.
2023-11-07 20:22:50.401 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" stopped.
2023-11-07 20:22:50.402 +02:00 [DBG] Connection id "0HMUVNOFIMUEV" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:22:50.408 +02:00 [DBG] Hosting stopped
2023-11-07 20:22:57.869 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:22:57.951 +02:00 [DBG] Hosting starting
2023-11-07 20:22:58.012 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:22:58.048 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:22:58.050 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:22:58.051 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:22:58.053 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:22:58.055 +02:00 [INF] Hosting environment: Development
2023-11-07 20:22:58.055 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:22:58.056 +02:00 [DBG] Hosting started
2023-11-07 20:23:31.434 +02:00 [INF] Application is shutting down...
2023-11-07 20:23:31.436 +02:00 [DBG] Hosting stopping
2023-11-07 20:23:31.447 +02:00 [DBG] Hosting stopped
2023-11-07 20:23:33.246 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:23:33.743 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:23:33.860 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.863 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.864 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.880 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.883 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.884 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.886 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.887 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.888 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.908 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.910 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.912 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.925 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.927 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.929 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.930 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.931 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.934 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.952 +02:00 [DBG] An entity of type 'CityDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.960 +02:00 [DBG] An entity of type 'CityDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.963 +02:00 [DBG] An entity of type 'CityDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.965 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.970 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.973 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.977 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.980 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.983 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:33.994 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:23:34.003 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:23:34.006 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:23:34.007 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:23:34.014 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.017 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.018 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.020 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.021 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.022 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.024 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.025 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.026 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.027 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.029 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.030 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.032 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.035 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.036 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.038 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.040 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.041 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.043 +02:00 [DBG] An entity of type 'CityDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.045 +02:00 [DBG] An entity of type 'CityDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.048 +02:00 [DBG] An entity of type 'CityDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.050 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.052 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.053 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.055 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.057 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.059 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:34.060 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:23:34.061 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:23:34.062 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:23:34.064 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:23:34.117 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:23:41.615 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:23:42.122 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:23:42.168 +02:00 [DBG] Migrating using database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.180 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.192 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:42.206 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-07 20:23:42.213 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (6ms).
2023-11-07 20:23:42.217 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.220 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:42.227 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-07 20:23:42.331 +02:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-07 20:23:42.339 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:42.343 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.346 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.348 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:42.349 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-07 20:23:42.350 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-11-07 20:23:42.351 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.353 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:42.354 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-07 20:23:42.356 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-07 20:23:42.358 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:42.359 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.370 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:23:42.372 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-07 20:23:42.373 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.375 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:42.376 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-07 20:23:42.378 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-07 20:23:42.381 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:23:42.382 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:42.383 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.392 +02:00 [INF] Applying migration '20231107182334_make-description-nullable'.
2023-11-07 20:23:42.466 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.469 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:42.471 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:23:42.474 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:23:42.475 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-07 20:23:42.476 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-07 20:23:42.478 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_PointsOfInterest" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_PointsOfInterest" PRIMARY KEY AUTOINCREMENT,
    "CityId" INTEGER NOT NULL,
    "Description" TEXT NULL,
    "Name" TEXT NOT NULL,
    CONSTRAINT "FK_PointsOfInterest_Cities_CityId" FOREIGN KEY ("CityId") REFERENCES "Cities" ("Id") ON DELETE CASCADE
);
2023-11-07 20:23:42.480 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_PointsOfInterest" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_PointsOfInterest" PRIMARY KEY AUTOINCREMENT,
    "CityId" INTEGER NOT NULL,
    "Description" TEXT NULL,
    "Name" TEXT NOT NULL,
    CONSTRAINT "FK_PointsOfInterest_Cities_CityId" FOREIGN KEY ("CityId") REFERENCES "Cities" ("Id") ON DELETE CASCADE
);
2023-11-07 20:23:42.483 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-07 20:23:42.485 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2023-11-07 20:23:42.488 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_PointsOfInterest" ("Id", "CityId", "Description", "Name")
SELECT "Id", "CityId", "Description", "Name"
FROM "PointsOfInterest";
2023-11-07 20:23:42.489 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_PointsOfInterest" ("Id", "CityId", "Description", "Name")
SELECT "Id", "CityId", "Description", "Name"
FROM "PointsOfInterest";
2023-11-07 20:23:42.492 +02:00 [DBG] Committing transaction.
2023-11-07 20:23:42.571 +02:00 [DBG] Committed transaction.
2023-11-07 20:23:42.573 +02:00 [DBG] Disposing transaction.
2023-11-07 20:23:42.574 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-07 20:23:42.575 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-07 20:23:42.576 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2023-11-07 20:23:42.578 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2023-11-07 20:23:42.580 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:23:42.581 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:23:42.582 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-07 20:23:42.584 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2023-11-07 20:23:42.585 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "PointsOfInterest";
2023-11-07 20:23:42.588 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "PointsOfInterest";
2023-11-07 20:23:42.590 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-07 20:23:42.591 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-07 20:23:42.592 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_PointsOfInterest" RENAME TO "PointsOfInterest";
2023-11-07 20:23:42.610 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_PointsOfInterest" RENAME TO "PointsOfInterest";
2023-11-07 20:23:42.613 +02:00 [DBG] Committing transaction.
2023-11-07 20:23:42.647 +02:00 [DBG] Committed transaction.
2023-11-07 20:23:42.650 +02:00 [DBG] Disposing transaction.
2023-11-07 20:23:42.651 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-07 20:23:42.652 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2023-11-07 20:23:42.653 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2023-11-07 20:23:42.655 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2023-11-07 20:23:42.657 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:23:42.658 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:23:42.659 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-07 20:23:42.659 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-07 20:23:42.661 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_PointsOfInterest_CityId" ON "PointsOfInterest" ("CityId");
2023-11-07 20:23:42.662 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_PointsOfInterest_CityId" ON "PointsOfInterest" ("CityId");
2023-11-07 20:23:42.664 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-07 20:23:42.665 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2023-11-07 20:23:42.666 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231107182334_make-description-nullable', '6.0.24');
2023-11-07 20:23:42.668 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231107182334_make-description-nullable', '6.0.24');
2023-11-07 20:23:42.670 +02:00 [DBG] Committing transaction.
2023-11-07 20:23:42.703 +02:00 [DBG] Committed transaction.
2023-11-07 20:23:42.705 +02:00 [DBG] Disposing transaction.
2023-11-07 20:23:42.706 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:42.707 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:42.709 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:23:46.490 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:23:46.575 +02:00 [DBG] Hosting starting
2023-11-07 20:23:46.635 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:23:46.674 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:23:46.676 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:23:46.678 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:23:46.679 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:23:46.680 +02:00 [INF] Hosting environment: Development
2023-11-07 20:23:46.681 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:23:46.682 +02:00 [DBG] Hosting started
2023-11-07 20:23:56.658 +02:00 [DBG] Connection id "0HMUVNQQ6H1J1" received FIN.
2023-11-07 20:23:56.667 +02:00 [DBG] Connection id "0HMUVNQQ6H1J1" accepted.
2023-11-07 20:23:56.669 +02:00 [DBG] Connection id "0HMUVNQQ6H1J1" started.
2023-11-07 20:23:56.671 +02:00 [DBG] Connection id "0HMUVNQQ6H1J2" accepted.
2023-11-07 20:23:56.673 +02:00 [DBG] Connection id "0HMUVNQQ6H1J2" started.
2023-11-07 20:23:56.684 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:23:56.705 +02:00 [DBG] Connection id "0HMUVNQQ6H1J1" stopped.
2023-11-07 20:23:56.710 +02:00 [DBG] Connection id "0HMUVNQQ6H1J1" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:23:56.718 +02:00 [DBG] Connection 0HMUVNQQ6H1J2 established using the following protocol: "Tls12"
2023-11-07 20:23:56.751 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 46
2023-11-07 20:23:56.754 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:23:56.778 +02:00 [DBG] PUT requests are not supported
2023-11-07 20:23:56.807 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:23:56.815 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:23:56.817 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:23:56.820 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:23:56.854 +02:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.PointOfInterestDto]] UpdatePointOfInterest(Int32, Int32, CityInfoApi.DTOs.PointOfInterestRequestDto) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:23:56.858 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:23:56.859 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:23:56.861 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:23:56.863 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:23:56.864 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:23:56.866 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:23:56.986 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:23:57.140 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:23:57.145 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:23:57.147 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:23:57.150 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:23:57.151 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:23:57.153 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:23:57.155 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:23:57.159 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:23:57.160 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:23:57.162 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:23:57.163 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:23:57.164 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:23:57.165 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:23:57.167 +02:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:23:57.169 +02:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' using the name '' in request data ...
2023-11-07 20:23:57.172 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:23:57.175 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:23:57.180 +02:00 [DBG] Connection id "0HMUVNQQ6H1J2", Request id "0HMUVNQQ6H1J2:00000002": started reading request body.
2023-11-07 20:23:57.183 +02:00 [DBG] Connection id "0HMUVNQQ6H1J2", Request id "0HMUVNQQ6H1J2:00000002": done reading request body.
2023-11-07 20:23:57.301 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:23:57.303 +02:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:23:57.305 +02:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto' ...
2023-11-07 20:23:57.312 +02:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfoApi.DTOs.PointOfInterestRequestDto'.
2023-11-07 20:23:58.267 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:23:58.317 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Any(c => c.Id == __cityId_0)'
2023-11-07 20:23:58.515 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:23:58.568 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:23:58.615 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (42ms).
2023-11-07 20:23:58.628 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:58.649 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:58.670 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:23:58.700 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:23:58.716 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:23:58.722 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:58.730 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:58.734 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .FirstOrDefault(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)'
2023-11-07 20:23:58.771 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterestDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterestDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:23:58.783 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:23:58.784 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:23:58.785 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:58.787 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:58.788 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:23:58.791 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:23:58.810 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:58.836 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:23:58.838 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:58.840 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:58.853 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:23:58.858 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:23:58.871 +02:00 [DBG] The unchanged property 'PointOfInterestDbModel.Description' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:23:58.886 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:58.890 +02:00 [DBG] The unchanged property 'PointOfInterestDbModel.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:23:58.894 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:23:58.913 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:58.915 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:58.918 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:23:58.923 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:23:58.977 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:23:58.979 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:23:58.981 +02:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?', @p1='?' (Size = 28)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-11-07 20:23:58.985 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?', @p1='?' (Size = 28)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-11-07 20:23:58.994 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:23:58.999 +02:00 [DBG] Committing transaction.
2023-11-07 20:23:59.084 +02:00 [DBG] Committed transaction.
2023-11-07 20:23:59.088 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:23:59.091 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:23:59.095 +02:00 [DBG] Disposing transaction.
2023-11-07 20:23:59.101 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:23:59.105 +02:00 [DBG] SaveChanges completed for 'CityInfoDbContext' with 1 entities written to the database.
2023-11-07 20:23:59.112 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-11-07 20:23:59.119 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi) in 2248.6758ms
2023-11-07 20:23:59.122 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:23:59.125 +02:00 [DBG] Connection id "0HMUVNQQ6H1J2" completed keep alive response.
2023-11-07 20:23:59.130 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:23:59.135 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 46 - 204 - - 2386.6268ms
2023-11-07 20:24:10.716 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - -
2023-11-07 20:24:10.727 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:24:10.730 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest'
2023-11-07 20:24:10.732 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest' is valid for the request path '/api/cities/1/pointsofinterest'
2023-11-07 20:24:10.733 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:24:10.734 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:24:10.739 +02:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfoApi.DTOs.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:24:10.741 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:24:10.743 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:24:10.745 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:24:10.747 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:24:10.748 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:24:10.750 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:24:10.751 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:24:10.753 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:24:10.754 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:24:10.755 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:24:10.757 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:24:10.758 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:24:10.759 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:24:10.765 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:24:10.776 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:24:10.793 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 20:24:10.890 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:24:10.896 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:24:10.897 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:24:10.898 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:24:10.899 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:24:10.901 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:24:10.903 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:24:10.908 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:24:10.921 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:24:10.932 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:24:10.934 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:24:10.935 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:24:10.936 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:24:10.947 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:24:10.953 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:24:10.953 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:24:10.955 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:24:10.956 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:24:10.957 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfoApi.DTOs.PointOfInterestDto, CityInfoApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-07 20:24:11.014 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi) in 264.8366ms
2023-11-07 20:24:11.017 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfoApi)'
2023-11-07 20:24:11.018 +02:00 [DBG] Connection id "0HMUVNQQ6H1J2" completed keep alive response.
2023-11-07 20:24:11.019 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:24:11.020 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1/pointsofinterest - - - 200 176 application/json;+charset=utf-8 304.4356ms
2023-11-07 20:26:22.062 +02:00 [DBG] Connection id "0HMUVNQQ6H1J2" disconnecting.
2023-11-07 20:26:22.068 +02:00 [DBG] Connection id "0HMUVNQQ6H1J2" stopped.
2023-11-07 20:26:22.069 +02:00 [DBG] Connection id "0HMUVNQQ6H1J2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:30:22.191 +02:00 [INF] Application is shutting down...
2023-11-07 20:30:22.193 +02:00 [DBG] Hosting stopping
2023-11-07 20:30:22.202 +02:00 [DBG] Hosting stopped
2023-11-07 20:31:35.153 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:31:35.297 +02:00 [DBG] Hosting starting
2023-11-07 20:31:35.453 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:31:35.531 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:31:35.532 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:31:35.534 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:31:35.536 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:31:35.539 +02:00 [INF] Hosting environment: Development
2023-11-07 20:31:35.540 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:31:35.541 +02:00 [DBG] Hosting started
2023-11-07 20:31:57.065 +02:00 [DBG] Connection id "0HMUVNV9C1HEF" received FIN.
2023-11-07 20:31:57.084 +02:00 [DBG] Connection id "0HMUVNV9C1HEF" accepted.
2023-11-07 20:31:57.089 +02:00 [DBG] Connection id "0HMUVNV9C1HEF" started.
2023-11-07 20:31:57.091 +02:00 [DBG] Connection id "0HMUVNV9C1HEG" accepted.
2023-11-07 20:31:57.092 +02:00 [DBG] Connection id "0HMUVNV9C1HEG" started.
2023-11-07 20:31:57.114 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:31:57.164 +02:00 [DBG] Connection id "0HMUVNV9C1HEF" stopped.
2023-11-07 20:31:57.167 +02:00 [DBG] Connection id "0HMUVNV9C1HEF" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:31:57.173 +02:00 [DBG] Connection 0HMUVNV9C1HEG established using the following protocol: "Tls12"
2023-11-07 20:31:57.197 +02:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 86
2023-11-07 20:31:57.202 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:31:57.218 +02:00 [DBG] PATCH requests are not supported
2023-11-07 20:31:57.241 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:31:57.246 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:31:57.251 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:31:57.253 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:31:57.275 +02:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:31:57.278 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:31:57.279 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:31:57.281 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:31:57.284 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:31:57.285 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:31:57.287 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:31:57.405 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:31:57.524 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:31:57.528 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:31:57.531 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:31:57.534 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:31:57.535 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:31:57.536 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:31:57.538 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:31:57.541 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:31:57.542 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:31:57.544 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:31:57.545 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:31:57.546 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:31:57.547 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:31:57.549 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:31:57.551 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' using the name '' in request data ...
2023-11-07 20:31:57.553 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:31:57.555 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:31:57.560 +02:00 [DBG] Connection id "0HMUVNV9C1HEG", Request id "0HMUVNV9C1HEG:00000002": started reading request body.
2023-11-07 20:31:57.562 +02:00 [DBG] Connection id "0HMUVNV9C1HEG", Request id "0HMUVNV9C1HEG:00000002": done reading request body.
2023-11-07 20:31:57.745 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:31:57.747 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:31:57.750 +02:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:31:57.754 +02:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:31:58.285 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:31:58.316 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Any(c => c.Id == __cityId_0)'
2023-11-07 20:31:58.446 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:31:58.483 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:31:58.544 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (59ms).
2023-11-07 20:31:58.554 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:31:58.570 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:31:58.584 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:31:58.608 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:31:58.621 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:31:58.627 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:31:58.633 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:31:58.637 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .FirstOrDefault(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)'
2023-11-07 20:31:58.661 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterestDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterestDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:31:58.671 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:31:58.674 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-07 20:31:58.675 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:31:58.677 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:31:58.678 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:31:58.681 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:31:58.694 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:31:58.711 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:31:58.713 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:31:58.714 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:31:58.869 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi) in 1578.6855ms
2023-11-07 20:31:58.872 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:31:58.874 +02:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
PointOfInterestDbModel -> PointOfInterestRequestDto
CityInfoApi.Models.PointOfInterestDbModel -> CityInfoApi.DTOs.PointOfInterestRequestDto
   at lambda_method69(Closure , Object , PointOfInterestRequestDto , ResolutionContext )
   at CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest(Int32 cityId, Int32 id, JsonPatchDocument`1 patchDocument) in D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\Controllers\PointsOfInterestController.cs:line 83
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-07 20:31:58.899 +02:00 [DBG] Connection id "0HMUVNV9C1HEG" completed keep alive response.
2023-11-07 20:31:58.905 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:31:58.909 +02:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 86 - 500 - text/plain;+charset=utf-8 1712.6436ms
2023-11-07 20:33:28.089 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:33:28.165 +02:00 [DBG] Hosting starting
2023-11-07 20:33:28.302 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:33:28.362 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:33:28.363 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:33:28.365 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:33:28.367 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:33:28.368 +02:00 [INF] Hosting environment: Development
2023-11-07 20:33:28.369 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:33:28.370 +02:00 [DBG] Hosting started
2023-11-07 20:33:31.673 +02:00 [DBG] Connection id "0HMUVO05I9HGQ" received FIN.
2023-11-07 20:33:31.682 +02:00 [DBG] Connection id "0HMUVO05I9HGQ" accepted.
2023-11-07 20:33:31.688 +02:00 [DBG] Connection id "0HMUVO05I9HGQ" started.
2023-11-07 20:33:31.691 +02:00 [DBG] Connection id "0HMUVO05I9HGR" accepted.
2023-11-07 20:33:31.693 +02:00 [DBG] Connection id "0HMUVO05I9HGR" started.
2023-11-07 20:33:31.712 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:33:31.752 +02:00 [DBG] Connection id "0HMUVO05I9HGQ" stopped.
2023-11-07 20:33:31.754 +02:00 [DBG] Connection id "0HMUVO05I9HGQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:33:31.760 +02:00 [DBG] Connection 0HMUVO05I9HGR established using the following protocol: "Tls12"
2023-11-07 20:33:31.785 +02:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 86
2023-11-07 20:33:31.788 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:33:31.803 +02:00 [DBG] PATCH requests are not supported
2023-11-07 20:33:31.826 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:33:31.832 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:33:31.835 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:33:31.837 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:33:31.859 +02:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:33:31.862 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:33:31.864 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:33:31.865 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:33:31.867 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:33:31.869 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:33:31.870 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:33:31.997 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:33:32.117 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:33:32.121 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:33:32.126 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:33:32.129 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:33:32.132 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:33:32.133 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:33:32.135 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:33:32.138 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:33:32.140 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:33:32.142 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:33:32.143 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:33:32.146 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:33:32.147 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:33:32.148 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:33:32.150 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' using the name '' in request data ...
2023-11-07 20:33:32.153 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:33:32.154 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:33:32.161 +02:00 [DBG] Connection id "0HMUVO05I9HGR", Request id "0HMUVO05I9HGR:00000002": started reading request body.
2023-11-07 20:33:32.163 +02:00 [DBG] Connection id "0HMUVO05I9HGR", Request id "0HMUVO05I9HGR:00000002": done reading request body.
2023-11-07 20:33:32.287 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:33:32.289 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:33:32.291 +02:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:33:32.295 +02:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:33:32.829 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:33:32.862 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Any(c => c.Id == __cityId_0)'
2023-11-07 20:33:32.989 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:33:33.028 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:33:33.095 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (65ms).
2023-11-07 20:33:33.106 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:33:33.121 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:33:33.136 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:33:33.157 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:33:33.171 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:33:33.178 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:33:33.184 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:33:33.189 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .FirstOrDefault(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)'
2023-11-07 20:33:33.216 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterestDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterestDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:33:33.228 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:33:33.230 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:33:33.232 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:33:33.233 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:33:33.235 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:33:33.237 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:33:33.253 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:33:33.269 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:33:33.271 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:33:33.272 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:35:31.500 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:35:31.580 +02:00 [DBG] Hosting starting
2023-11-07 20:35:31.702 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:35:31.760 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:35:31.762 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:35:31.763 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:35:31.764 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:35:31.766 +02:00 [INF] Hosting environment: Development
2023-11-07 20:35:31.767 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:35:31.767 +02:00 [DBG] Hosting started
2023-11-07 20:35:33.519 +02:00 [DBG] Connection id "0HMUVO19S9UPN" received FIN.
2023-11-07 20:35:33.529 +02:00 [DBG] Connection id "0HMUVO19S9UPN" accepted.
2023-11-07 20:35:33.532 +02:00 [DBG] Connection id "0HMUVO19S9UPN" started.
2023-11-07 20:35:33.536 +02:00 [DBG] Connection id "0HMUVO19S9UPO" accepted.
2023-11-07 20:35:33.538 +02:00 [DBG] Connection id "0HMUVO19S9UPO" started.
2023-11-07 20:35:33.552 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:35:33.599 +02:00 [DBG] Connection id "0HMUVO19S9UPN" stopped.
2023-11-07 20:35:33.602 +02:00 [DBG] Connection id "0HMUVO19S9UPN" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:35:33.611 +02:00 [DBG] Connection 0HMUVO19S9UPO established using the following protocol: "Tls12"
2023-11-07 20:35:33.635 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1?includepointsofinterest=true - -
2023-11-07 20:35:33.638 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:35:33.670 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:35:33.694 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-11-07 20:35:33.700 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)' with route pattern 'api/Cities/{id}' is valid for the request path '/api/cities/1'
2023-11-07 20:35:33.702 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:35:33.705 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:35:33.727 +02:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.CityDto]] GetCity(Int32, Boolean) on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 20:35:33.730 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:35:33.732 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:35:33.734 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:35:33.739 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:35:33.741 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:35:33.743 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 20:35:33.864 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:35:33.982 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 20:35:33.991 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:35:33.994 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:35:33.996 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:35:33.997 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:35:33.999 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:35:34.001 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:35:34.005 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 20:35:34.007 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-11-07 20:35:34.010 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:35:34.011 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:35:34.012 +02:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 20:35:34.014 +02:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:35:34.502 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:35:34.569 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:35:34.609 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 20:35:34.782 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:35:34.818 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:35:34.882 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (61ms).
2023-11-07 20:35:34.892 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:35:34.907 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:35:34.921 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:35:34.946 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:35:34.965 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:35:34.985 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:35:34.999 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:35:35.007 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:35:35.013 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:35:35.018 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:35:35.031 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:35:35.036 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:35:35.037 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:35:35.038 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:35:35.041 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:35:35.043 +02:00 [INF] Executing OkObjectResult, writing value of type 'CityInfoApi.DTOs.CityDto'.
2023-11-07 20:35:35.157 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi) in 1411.3609ms
2023-11-07 20:35:35.160 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:35:35.161 +02:00 [DBG] Connection id "0HMUVO19S9UPO" completed keep alive response.
2023-11-07 20:35:35.165 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:35:35.168 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1?includepointsofinterest=true - - - 200 300 application/json;+charset=utf-8 1534.0471ms
2023-11-07 20:35:48.243 +02:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/2 application/json 86
2023-11-07 20:35:48.244 +02:00 [DBG] PATCH requests are not supported
2023-11-07 20:35:48.246 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/2'
2023-11-07 20:35:48.249 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/2'
2023-11-07 20:35:48.251 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:35:48.252 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:35:48.256 +02:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:35:48.258 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:35:48.261 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:35:48.263 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:35:48.265 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:35:48.267 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:35:48.268 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:35:48.270 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:35:48.272 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:35:48.273 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:35:48.274 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:35:48.276 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:35:48.277 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:35:48.279 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:35:48.280 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:35:48.281 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:35:48.283 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:35:48.284 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:35:48.285 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:35:48.286 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:35:48.288 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:35:48.290 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' using the name '' in request data ...
2023-11-07 20:35:48.292 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:35:48.294 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:35:48.299 +02:00 [DBG] Connection id "0HMUVO19S9UPO", Request id "0HMUVO19S9UPO:00000003": started reading request body.
2023-11-07 20:35:48.302 +02:00 [DBG] Connection id "0HMUVO19S9UPO", Request id "0HMUVO19S9UPO:00000003": done reading request body.
2023-11-07 20:35:48.347 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:35:48.349 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:35:48.351 +02:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:35:48.355 +02:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:35:48.369 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:35:48.376 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Any(c => c.Id == __cityId_0)'
2023-11-07 20:35:48.382 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:35:48.390 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:35:48.392 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-07 20:35:48.394 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:35:48.395 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:35:48.396 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:35:48.398 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:35:48.401 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:35:48.402 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:35:48.403 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:35:48.406 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .FirstOrDefault(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)'
2023-11-07 20:35:48.409 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterestDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterestDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:35:48.413 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:35:48.415 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:35:48.416 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:35:48.417 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:35:48.419 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:35:48.421 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:35:48.423 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:35:48.424 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:35:48.425 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:35:48.427 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:39:28.914 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:39:28.991 +02:00 [DBG] Hosting starting
2023-11-07 20:39:29.125 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:39:29.178 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:39:29.180 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:39:29.181 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:39:29.183 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:39:29.185 +02:00 [INF] Hosting environment: Development
2023-11-07 20:39:29.186 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:39:29.187 +02:00 [DBG] Hosting started
2023-11-07 20:39:50.743 +02:00 [DBG] Connection id "0HMUVO3MHCKF5" received FIN.
2023-11-07 20:39:50.763 +02:00 [DBG] Connection id "0HMUVO3MHCKF5" accepted.
2023-11-07 20:39:50.768 +02:00 [DBG] Connection id "0HMUVO3MHCKF5" started.
2023-11-07 20:39:50.770 +02:00 [DBG] Connection id "0HMUVO3MHCKF6" accepted.
2023-11-07 20:39:50.772 +02:00 [DBG] Connection id "0HMUVO3MHCKF6" started.
2023-11-07 20:39:50.791 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:39:50.835 +02:00 [DBG] Connection id "0HMUVO3MHCKF5" stopped.
2023-11-07 20:39:50.844 +02:00 [DBG] Connection id "0HMUVO3MHCKF5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:39:50.855 +02:00 [DBG] Connection 0HMUVO3MHCKF6 established using the following protocol: "Tls12"
2023-11-07 20:39:50.881 +02:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/2 application/json 86
2023-11-07 20:39:50.884 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:39:50.900 +02:00 [DBG] PATCH requests are not supported
2023-11-07 20:39:50.922 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/2'
2023-11-07 20:39:50.928 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/2'
2023-11-07 20:39:50.931 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:39:50.933 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:39:50.954 +02:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:39:50.958 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:39:50.960 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:39:50.961 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:39:50.963 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:39:50.965 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:39:50.967 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:39:51.089 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:39:51.205 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:39:51.211 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:39:51.214 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:39:51.216 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:39:51.217 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:39:51.218 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:39:51.220 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:39:51.223 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:39:51.225 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:39:51.226 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:39:51.228 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:39:51.229 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:39:51.230 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:39:51.232 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:39:51.233 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' using the name '' in request data ...
2023-11-07 20:39:51.235 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:39:51.237 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:39:51.242 +02:00 [DBG] Connection id "0HMUVO3MHCKF6", Request id "0HMUVO3MHCKF6:00000002": started reading request body.
2023-11-07 20:39:51.245 +02:00 [DBG] Connection id "0HMUVO3MHCKF6", Request id "0HMUVO3MHCKF6:00000002": done reading request body.
2023-11-07 20:39:51.367 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:39:51.370 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:39:51.371 +02:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:39:51.376 +02:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:39:51.907 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:39:51.941 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Any(c => c.Id == __cityId_0)'
2023-11-07 20:39:52.067 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:39:52.102 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:39:52.163 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (59ms).
2023-11-07 20:39:52.173 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:39:52.188 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:39:52.204 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:39:52.230 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:39:52.242 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:39:52.247 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:39:52.253 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:39:52.257 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .FirstOrDefault(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)'
2023-11-07 20:39:52.281 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterestDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterestDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:39:52.292 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:39:52.294 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:39:52.296 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:39:52.297 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:39:52.298 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:39:52.300 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:39:52.313 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:39:52.330 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:39:52.332 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:39:52.333 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:40:16.609 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:40:16.617 +02:00 [DBG] The unchanged property 'PointOfInterestDbModel.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:40:16.626 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:40:16.630 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:40:44.585 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:40:44.665 +02:00 [DBG] Hosting starting
2023-11-07 20:40:44.726 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:40:44.762 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:40:44.764 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:40:44.765 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:40:44.767 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:40:44.768 +02:00 [INF] Hosting environment: Development
2023-11-07 20:40:44.769 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:40:44.770 +02:00 [DBG] Hosting started
2023-11-07 20:48:12.742 +02:00 [INF] Application is shutting down...
2023-11-07 20:48:12.744 +02:00 [DBG] Hosting stopping
2023-11-07 20:48:12.754 +02:00 [DBG] Hosting stopped
2023-11-07 20:48:18.980 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-07 20:48:19.075 +02:00 [DBG] Hosting starting
2023-11-07 20:48:19.155 +02:00 [DBG] Using development certificate: CN=localhost (Thumbprint: ED05320FDF75C3A69F97D4E9F0E037F1CA7CC021)
2023-11-07 20:48:19.198 +02:00 [INF] Now listening on: https://localhost:7105
2023-11-07 20:48:19.201 +02:00 [INF] Now listening on: http://localhost:5153
2023-11-07 20:48:19.202 +02:00 [DBG] Loaded hosting startup assembly CityInfoApi
2023-11-07 20:48:19.204 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-07 20:48:19.205 +02:00 [INF] Hosting environment: Development
2023-11-07 20:48:19.207 +02:00 [INF] Content root path: D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\
2023-11-07 20:48:19.208 +02:00 [DBG] Hosting started
2023-11-07 20:48:27.949 +02:00 [DBG] Connection id "0HMUVO8GLR7D2" received FIN.
2023-11-07 20:48:27.960 +02:00 [DBG] Connection id "0HMUVO8GLR7D2" accepted.
2023-11-07 20:48:27.963 +02:00 [DBG] Connection id "0HMUVO8GLR7D2" started.
2023-11-07 20:48:27.964 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" accepted.
2023-11-07 20:48:27.966 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" started.
2023-11-07 20:48:27.979 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-07 20:48:28.001 +02:00 [DBG] Connection id "0HMUVO8GLR7D2" stopped.
2023-11-07 20:48:28.004 +02:00 [DBG] Connection id "0HMUVO8GLR7D2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:48:28.018 +02:00 [DBG] Connection 0HMUVO8GLR7D3 established using the following protocol: "Tls12"
2023-11-07 20:48:28.053 +02:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/10 application/json 206
2023-11-07 20:48:28.056 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-07 20:48:28.078 +02:00 [DBG] PATCH requests are not supported
2023-11-07 20:48:28.107 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/10'
2023-11-07 20:48:28.115 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/10'
2023-11-07 20:48:28.117 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:28.120 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:28.156 +02:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:48:28.160 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:48:28.161 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:48:28.163 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:48:28.165 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:48:28.166 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:48:28.168 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:48:28.289 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-07 20:48:28.453 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:48:28.457 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:48:28.461 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:48:28.464 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:28.465 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:28.467 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:48:28.469 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:28.472 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:28.474 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:48:28.477 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:28.478 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:28.480 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:28.482 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:28.483 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:48:28.485 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' using the name '' in request data ...
2023-11-07 20:48:28.488 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:48:28.489 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:48:28.496 +02:00 [DBG] Connection id "0HMUVO8GLR7D3", Request id "0HMUVO8GLR7D3:00000002": started reading request body.
2023-11-07 20:48:28.498 +02:00 [DBG] Connection id "0HMUVO8GLR7D3", Request id "0HMUVO8GLR7D3:00000002": done reading request body.
2023-11-07 20:48:28.674 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:28.678 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:28.680 +02:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:48:28.687 +02:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:29.634 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:48:29.686 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Any(c => c.Id == __cityId_0)'
2023-11-07 20:48:29.877 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:48:29.929 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:29.976 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (43ms).
2023-11-07 20:48:29.989 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:30.013 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:30.033 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:48:30.066 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:48:30.082 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:30.090 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:30.096 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:30.101 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .FirstOrDefault(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)'
2023-11-07 20:48:30.139 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterestDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterestDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:48:30.151 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:30.153 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:48:30.154 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:30.156 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:30.158 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:48:30.161 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:48:30.164 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:30.165 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:30.166 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:30.169 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:48:30.174 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:48:30.175 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-07 20:48:30.180 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 20:48:30.182 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-07 20:48:30.249 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi) in 2076.6548ms
2023-11-07 20:48:30.252 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:30.253 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" completed keep alive response.
2023-11-07 20:48:30.258 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:48:30.263 +02:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/10 application/json 206 - 404 161 application/problem+json;+charset=utf-8 2213.4778ms
2023-11-07 20:48:37.626 +02:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 206
2023-11-07 20:48:37.628 +02:00 [DBG] PATCH requests are not supported
2023-11-07 20:48:37.631 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:48:37.633 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:48:37.635 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:37.636 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:37.637 +02:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:48:37.639 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:48:37.640 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:48:37.642 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:48:37.645 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:48:37.647 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:48:37.648 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:48:37.650 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:48:37.651 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:48:37.653 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:48:37.654 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:37.656 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:37.657 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:48:37.658 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:37.660 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:37.662 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:48:37.664 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:37.665 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:37.666 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:37.668 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:37.669 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:48:37.670 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' using the name '' in request data ...
2023-11-07 20:48:37.672 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:48:37.673 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:48:37.674 +02:00 [DBG] Connection id "0HMUVO8GLR7D3", Request id "0HMUVO8GLR7D3:00000003": started reading request body.
2023-11-07 20:48:37.676 +02:00 [DBG] Connection id "0HMUVO8GLR7D3", Request id "0HMUVO8GLR7D3:00000003": done reading request body.
2023-11-07 20:48:37.679 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:37.681 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:37.684 +02:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:48:37.685 +02:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:37.689 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:48:37.695 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:37.697 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:48:37.698 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:37.700 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:37.701 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:48:37.703 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:48:37.706 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:37.707 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:37.708 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:37.710 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:37.711 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:48:37.713 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:37.715 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:37.716 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:48:37.719 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:48:37.740 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:48:37.772 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:37.774 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:37.776 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:37.805 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:48:37.812 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:48:37.830 +02:00 [DBG] The unchanged property 'PointOfInterestDbModel.Description' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:48:37.846 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:48:37.852 +02:00 [DBG] The unchanged property 'PointOfInterestDbModel.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-07 20:48:37.857 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:48:37.879 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:37.882 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:37.885 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:48:37.892 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:48:37.956 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:37.959 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-07 20:48:37.960 +02:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 21), @p1='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-11-07 20:48:37.966 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 21), @p1='?' (Size = 22)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointsOfInterest" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-11-07 20:48:37.975 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:37.983 +02:00 [DBG] Committing transaction.
2023-11-07 20:48:38.068 +02:00 [DBG] Committed transaction.
2023-11-07 20:48:38.072 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:38.074 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:38.079 +02:00 [DBG] Disposing transaction.
2023-11-07 20:48:38.086 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:48:38.091 +02:00 [DBG] SaveChanges completed for 'CityInfoDbContext' with 1 entities written to the database.
2023-11-07 20:48:38.098 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-11-07 20:48:38.100 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi) in 451.7762ms
2023-11-07 20:48:38.102 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:38.103 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" completed keep alive response.
2023-11-07 20:48:38.105 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:48:38.107 +02:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 206 - 204 - - 480.2490ms
2023-11-07 20:48:42.591 +02:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 112
2023-11-07 20:48:42.594 +02:00 [DBG] PATCH requests are not supported
2023-11-07 20:48:42.594 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:48:42.597 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:48:42.598 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:42.599 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:42.600 +02:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:48:42.602 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:48:42.604 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:48:42.605 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:48:42.607 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:48:42.608 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:48:42.610 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:48:42.613 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:48:42.615 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:48:42.617 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:48:42.618 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:42.619 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:42.620 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:48:42.621 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:42.623 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:42.624 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:48:42.625 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:42.626 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:42.627 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:42.629 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:42.631 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:48:42.632 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' using the name '' in request data ...
2023-11-07 20:48:42.634 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:48:42.635 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:48:42.636 +02:00 [DBG] Connection id "0HMUVO8GLR7D3", Request id "0HMUVO8GLR7D3:00000004": started reading request body.
2023-11-07 20:48:42.637 +02:00 [DBG] Connection id "0HMUVO8GLR7D3", Request id "0HMUVO8GLR7D3:00000004": done reading request body.
2023-11-07 20:48:42.639 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:42.640 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:42.641 +02:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:48:42.642 +02:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:42.692 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:48:42.695 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:42.697 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:48:42.699 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:42.700 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:42.701 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:48:42.703 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:48:42.705 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:42.706 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:42.707 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:42.708 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:42.709 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:48:42.710 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:42.712 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:42.714 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:48:42.716 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:48:42.718 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:48:42.719 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:42.720 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:42.721 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:42.725 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:48:42.728 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:48:42.730 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
2023-11-07 20:48:42.731 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 20:48:42.733 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-11-07 20:48:42.747 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi) in 137.6104ms
2023-11-07 20:48:42.749 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:42.750 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" completed keep alive response.
2023-11-07 20:48:42.751 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:48:42.753 +02:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 112 - 400 313 application/problem+json;+charset=utf-8 161.2979ms
2023-11-07 20:48:47.024 +02:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 59
2023-11-07 20:48:47.026 +02:00 [DBG] PATCH requests are not supported
2023-11-07 20:48:47.027 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:48:47.029 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:48:47.031 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:47.032 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:47.034 +02:00 [INF] Route matched with {action = "PartiallyUpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] PartiallyUpdatePointOfInterest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:48:47.036 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:48:47.038 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:48:47.040 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:48:47.044 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:48:47.046 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:48:47.048 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:48:47.050 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:48:47.053 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:48:47.054 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:48:47.056 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:47.057 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:47.059 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:48:47.060 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:47.062 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:47.064 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:48:47.066 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:47.067 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:47.068 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:47.069 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:47.070 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:48:47.071 +02:00 [DBG] Attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' using the name '' in request data ...
2023-11-07 20:48:47.073 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-07 20:48:47.074 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-07 20:48:47.075 +02:00 [DBG] Connection id "0HMUVO8GLR7D3", Request id "0HMUVO8GLR7D3:00000005": started reading request body.
2023-11-07 20:48:47.076 +02:00 [DBG] Connection id "0HMUVO8GLR7D3", Request id "0HMUVO8GLR7D3:00000005": done reading request body.
2023-11-07 20:48:47.078 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:47.079 +02:00 [DBG] Done attempting to bind parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:47.080 +02:00 [DBG] Attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]' ...
2023-11-07 20:48:47.082 +02:00 [DBG] Done attempting to validate the bound parameter 'patchDocument' of type 'Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfoApi.DTOs.PointOfInterestRequestDto]'.
2023-11-07 20:48:47.084 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:48:47.086 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:47.087 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:48:47.088 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:47.089 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:47.090 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:48:47.092 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:48:47.094 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:47.095 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:47.096 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:47.098 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:47.099 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:48:47.101 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:47.102 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:47.103 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:48:47.106 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE ("p"."CityId" = @__cityId_0) AND ("p"."Id" = @__pointOfInterestId_1)
LIMIT 1
2023-11-07 20:48:47.109 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:48:47.110 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:47.111 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:47.112 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:47.115 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:48:47.119 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:48:47.119 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml"]'.
2023-11-07 20:48:47.121 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-07 20:48:47.122 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-11-07 20:48:47.124 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi) in 75.629ms
2023-11-07 20:48:47.125 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.PartiallyUpdatePointOfInterest (CityInfoApi)'
2023-11-07 20:48:47.126 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" completed keep alive response.
2023-11-07 20:48:47.127 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:48:47.128 +02:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7105/api/cities/1/pointsofinterest/1 application/json 59 - 400 230 application/problem+json;+charset=utf-8 104.0007ms
2023-11-07 20:48:52.200 +02:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7105/api/cities/1/pointsofinterest/1 - -
2023-11-07 20:48:52.202 +02:00 [DBG] DELETE requests are not supported
2023-11-07 20:48:52.202 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:48:52.203 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfoApi)' with route pattern 'api/cities/{cityId}/PointsOfInterest/{id}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-11-07 20:48:52.205 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfoApi)'
2023-11-07 20:48:52.206 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfoApi)'
2023-11-07 20:48:52.210 +02:00 [INF] Route matched with {action = "DeletePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeletePointOfInterest(Int32, Int32) on controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi).
2023-11-07 20:48:52.212 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:48:52.213 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:48:52.215 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:48:52.218 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:48:52.219 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:48:52.220 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:48:52.222 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.PointsOfInterestController (CityInfoApi)
2023-11-07 20:48:52.223 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:48:52.224 +02:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-07 20:48:52.226 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:52.227 +02:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:52.228 +02:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-07 20:48:52.229 +02:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-07 20:48:52.230 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:52.232 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:48:52.234 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:52.236 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:52.237 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:52.238 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:52.241 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:48:52.242 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:52.243 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:48:52.244 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:52.246 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:52.247 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:48:52.251 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-07 20:48:52.253 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:52.255 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:52.257 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:52.259 +02:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterestDbModel>()
    .FirstOrDefault(p => p.Id == __pointOfInterestId_0)'
2023-11-07 20:48:52.263 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterestDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterestDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 1], [Property: PointOfInterestDbModel.Description (string) MaxLength(200), 2], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE p.Id == @__pointOfInterestId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterestDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:48:52.267 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:52.268 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-07 20:48:52.269 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:52.270 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:52.272 +02:00 [DBG] Executing DbCommand [Parameters=[@__pointOfInterestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."Id" = @__pointOfInterestId_0
LIMIT 1
2023-11-07 20:48:52.273 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__pointOfInterestId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointsOfInterest" AS "p"
WHERE "p"."Id" = @__pointOfInterestId_0
LIMIT 1
2023-11-07 20:48:52.275 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:48:52.277 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:52.277 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:52.278 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:52.283 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:48:52.287 +02:00 [DBG] SaveChanges starting for 'CityInfoDbContext'.
2023-11-07 20:48:52.288 +02:00 [DBG] DetectChanges starting for 'CityInfoDbContext'.
2023-11-07 20:48:52.290 +02:00 [DBG] DetectChanges completed for 'CityInfoDbContext'.
2023-11-07 20:48:52.292 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:52.293 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:52.294 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-07 20:48:52.295 +02:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-07 20:48:52.308 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:52.310 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:48:52.311 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointsOfInterest"
WHERE "Id" = @p0;
SELECT changes();
2023-11-07 20:48:52.313 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PointsOfInterest"
WHERE "Id" = @p0;
SELECT changes();
2023-11-07 20:48:52.315 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:52.317 +02:00 [DBG] Committing transaction.
2023-11-07 20:48:52.367 +02:00 [DBG] Committed transaction.
2023-11-07 20:48:52.372 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:52.378 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:52.379 +02:00 [DBG] Disposing transaction.
2023-11-07 20:48:52.386 +02:00 [DBG] An entity of type 'PointOfInterestDbModel' tracked by 'CityInfoDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:48:52.388 +02:00 [DBG] SaveChanges completed for 'CityInfoDbContext' with 1 entities written to the database.
2023-11-07 20:48:52.389 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-11-07 20:48:52.390 +02:00 [INF] Executed action CityInfoApi.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfoApi) in 169.5285ms
2023-11-07 20:48:52.391 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfoApi)'
2023-11-07 20:48:52.392 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" completed keep alive response.
2023-11-07 20:48:52.393 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:48:52.394 +02:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7105/api/cities/1/pointsofinterest/1 - - - 204 - - 194.4308ms
2023-11-07 20:48:57.517 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7105/api/cities/1?includepointsofinterest=true - -
2023-11-07 20:48:57.527 +02:00 [DBG] The request path  does not match the path filter
2023-11-07 20:48:57.528 +02:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-11-07 20:48:57.529 +02:00 [DBG] Endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)' with route pattern 'api/Cities/{id}' is valid for the request path '/api/cities/1'
2023-11-07 20:48:57.532 +02:00 [DBG] Request matched endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:48:57.534 +02:00 [INF] Executing endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:48:57.539 +02:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfoApi.DTOs.CityDto]] GetCity(Int32, Boolean) on controller CityInfoApi.Controllers.CitiesController (CityInfoApi).
2023-11-07 20:48:57.541 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-07 20:48:57.543 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-07 20:48:57.544 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-07 20:48:57.547 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-07 20:48:57.548 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-07 20:48:57.550 +02:00 [DBG] Executing controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 20:48:57.552 +02:00 [DBG] Executed controller factory for controller CityInfoApi.Controllers.CitiesController (CityInfoApi)
2023-11-07 20:48:57.557 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:57.560 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-11-07 20:48:57.561 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:57.562 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:57.563 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-11-07 20:48:57.565 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-11-07 20:48:57.566 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 20:48:57.569 +02:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-11-07 20:48:57.571 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:48:57.572 +02:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:48:57.573 +02:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-11-07 20:48:57.574 +02:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-11-07 20:48:57.578 +02:00 [INF] Entity Framework Core 6.0.24 initialized 'CityInfoDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.24' with options: None
2023-11-07 20:48:57.587 +02:00 [DBG] Compiling query expression: 
'DbSet<CityDbModel>()
    .Include(c => c.PointsOfInterest)
    .FirstOrDefault(c => c.Id == __cityId_0)'
2023-11-07 20:48:57.599 +02:00 [DBG] Including navigation: 'CityDbModel.PointsOfInterest'.
2023-11-07 20:48:57.686 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CityDbModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CityDbModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: CityDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CityDbModel.Description (string) Required MaxLength(200), 1], [Property: CityDbModel.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterestDbModel.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterestDbModel.CityId (int) Required FK Index, 4], [Property: PointOfInterestDbModel.Description (string) MaxLength(200), 5], [Property: PointOfInterestDbModel.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointsOfInterest AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CityDbModel>, 
        CityInfoApi.DbContexts.CityInfoDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-07 20:48:57.691 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-07 20:48:57.692 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-07 20:48:57.694 +02:00 [DBG] Opening connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:57.695 +02:00 [DBG] Opened connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:57.696 +02:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:48:57.698 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointsOfInterest" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-07 20:48:57.702 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'CityDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:48:57.713 +02:00 [DBG] Context 'CityInfoDbContext' started tracking 'PointOfInterestDbModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-07 20:48:57.723 +02:00 [DBG] A data reader was disposed.
2023-11-07 20:48:57.725 +02:00 [DBG] Closing connection to database 'main' on server 'D:\CMP\CMP7\vacation\dotnet\CityInfo\CityInfo\CityInfoApi\CityInfo.db'.
2023-11-07 20:48:57.726 +02:00 [DBG] Closed connection to database 'main' on server 'CityInfo.db'.
2023-11-07 20:48:57.733 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-07 20:48:57.737 +02:00 [DBG] No information found on request to perform content negotiation.
2023-11-07 20:48:57.738 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-07 20:48:57.739 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-07 20:48:57.739 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-07 20:48:57.741 +02:00 [INF] Executing OkObjectResult, writing value of type 'CityInfoApi.DTOs.CityDto'.
2023-11-07 20:48:57.746 +02:00 [INF] Executed action CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi) in 196.2154ms
2023-11-07 20:48:57.749 +02:00 [INF] Executed endpoint 'CityInfoApi.Controllers.CitiesController.GetCity (CityInfoApi)'
2023-11-07 20:48:57.750 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" completed keep alive response.
2023-11-07 20:48:57.752 +02:00 [DBG] 'CityInfoDbContext' disposed.
2023-11-07 20:48:57.753 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7105/api/cities/1?includepointsofinterest=true - - - 200 234 application/json;+charset=utf-8 236.7587ms
2023-11-07 20:49:01.558 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" received FIN.
2023-11-07 20:49:01.560 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-07 20:49:01.563 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" disconnecting.
2023-11-07 20:49:01.567 +02:00 [DBG] Connection id "0HMUVO8GLR7D3" stopped.
2023-11-07 20:49:03.393 +02:00 [INF] Application is shutting down...
2023-11-07 20:49:03.394 +02:00 [DBG] Hosting stopping
2023-11-07 20:49:03.403 +02:00 [DBG] Hosting stopped
